!function(){window.LI={"appId":"a-01b5","advertiserId":443,"sync":true,"euns":false,"identifiersToResolve":"_sharedid,dsq__s,s_vi,trc_cookie_storage,gup_anonid,_li_uuid,hid,_parrable_id,tmguid,ajs_user_id,globalTI_SID,muuid,dsq__u,dtm_token,_shopify_y,_pubcid,IXWRAPPERLiveIntentIp,_aalyticsuid,s_ecid","contextSelectors":"","contextElementsLength":5000,"urlCollectionMode":"full","identityResolutionConfig":{"publisherId":443}}}();!function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n=function(e){try{return!!e()}catch(e){return!0}},r=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),o=r,i=Function.prototype,s=i.call,a=o&&i.bind.bind(s,s),l=o?a:function(e){return function(){return s.apply(e,arguments)}},c=function(e){return null==e},u=c,d=TypeError,p=function(e){if(u(e))throw new d("Can't call method on "+e);return e},f=p,h=Object,g=function(e){return h(f(e))},v=g,y=l({}.hasOwnProperty),m=Object.ownProp||function(e,t){return y(v(e),t)},w=l,b=w({}.toString),S=w("".slice),E=function(e){return S(b(e),8,-1)},C=E,x=Array.isArray||function(e){return"Array"===C(e)},k="object"==typeof document&&document.all,P=void 0===k&&void 0!==k?function(e){return"function"==typeof e||e===k}:function(e){return"function"==typeof e},I=n,R=P,O=/#|\.prototype\./,_=function(e,t){var n=U[A(e)];return n===L||n!==T&&(R(t)?I(t):!!t)},A=_.normalize=function(e){return String(e).replace(O,".").toLowerCase()},U=_.data={},T=_.NATIVE="N",L=_.POLYFILL="P",j=_,D={exports:{}},F=!0,H=function(e){return e&&e.Math===Math&&e},N=H("object"==typeof globalThis&&globalThis)||H("object"==typeof window&&window)||H("object"==typeof self&&self)||H("object"==typeof e&&e)||H("object"==typeof e&&e)||function(){return this}()||Function("return this")(),$=N,M=Object.defineProperty,q=N,B=function(e,t){try{M($,e,{value:t,configurable:!0,writable:!0})}catch(n){$[e]=t}return t},Q="__core-js_shared__",V=D.exports=q[Q]||B(Q,{});(V.versions||(V.versions=[])).push({version:"3.38.1",mode:"pure",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"});var G=D.exports,z=m,J=x,W=j,X=G,Y=W.data,Z=W.normalize,K="USE_FUNCTION_CONSTRUCTOR",ee="AsyncIteratorPrototype",te=function(e,t){if(J(e))for(var n=0;n<e.length;n++)Y[Z(e[n])]=t};t((function(e){"object"==typeof e&&(te(e.useNative,W.NATIVE),te(e.usePolyfill,W.POLYFILL),te(e.useFeatureDetection,null),z(e,K)&&(X[K]=!!e[K]),z(e,ee)&&(X[ee]=e[ee]))}))({usePolyfill:["Date.now"]});var ne=r,re=Function.prototype,oe=re.apply,ie=re.call,se="object"==typeof Reflect&&Reflect.apply||(ne?ie.bind(oe):function(){return ie.apply(oe,arguments)}),ae=E,le=l,ce=function(e){if("Function"===ae(e))return le(e)},ue={},de=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),pe=r,fe=Function.prototype.call,he=pe?fe.bind(fe):function(){return fe.apply(fe,arguments)},ge={},ve={}.propertyIsEnumerable,ye=Object.getOwnPropertyDescriptor,me=ye&&!ve.call({1:2},1);ge.f=me?function(e){var t=ye(this,e);return!!t&&t.enumerable}:ve;var we,be,Se=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Ee=n,Ce=E,xe=Object,ke=l("".split),Pe=Ee((function(){return!xe("z").propertyIsEnumerable(0)}))?function(e){return"String"===Ce(e)?ke(e,""):xe(e)}:xe,Ie=Pe,Re=p,Oe=function(e){return Ie(Re(e))},_e=P,Ae=function(e){return"object"==typeof e?null!==e:_e(e)},Ue={},Te=Ue,Le=N,je=P,De=function(e){return je(e)?e:void 0},Fe=function(e,t){return arguments.length<2?De(Te[e])||De(Le[e]):Te[e]&&Te[e][t]||Le[e]&&Le[e][t]},He=l({}.isPrototypeOf),Ne=N.navigator,$e=Ne&&Ne.userAgent,Me=$e?String($e):"",qe=N,Be=Me,Qe=qe.process,Ve=qe.Deno,Ge=Qe&&Qe.versions||Ve&&Ve.version,ze=Ge&&Ge.v8;ze&&(be=(we=ze.split("."))[0]>0&&we[0]<4?1:+(we[0]+we[1])),!be&&Be&&(!(we=Be.match(/Edge\/(\d+)/))||we[1]>=74)&&(we=Be.match(/Chrome\/(\d+)/))&&(be=+we[1]);var Je=be,We=Je,Xe=n,Ye=N.String,Ze=!!Object.getOwnPropertySymbols&&!Xe((function(){var e=Symbol("symbol detection");return!Ye(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&We&&We<41})),Ke=Ze&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,et=Fe,tt=P,nt=He,rt=Object,ot=Ke?function(e){return"symbol"==typeof e}:function(e){var t=et("Symbol");return tt(t)&&nt(t.prototype,rt(e))},it=String,st=function(e){try{return it(e)}catch(e){return"Object"}},at=P,lt=st,ct=TypeError,ut=function(e){if(at(e))return e;throw new ct(lt(e)+" is not a function")},dt=ut,pt=c,ft=function(e,t){var n=e[t];return pt(n)?void 0:dt(n)},ht=he,gt=P,vt=Ae,yt=TypeError,mt=G,wt=function(e,t){return mt[e]||(mt[e]=t||{})},bt=l,St=0,Et=Math.random(),Ct=bt(1..toString),xt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Ct(++St+Et,36)},kt=wt,Pt=m,It=xt,Rt=Ze,Ot=Ke,_t=N.Symbol,At=kt("wks"),Ut=Ot?_t.for||_t:_t&&_t.withoutSetter||It,Tt=function(e){return Pt(At,e)||(At[e]=Rt&&Pt(_t,e)?_t[e]:Ut("Symbol."+e)),At[e]},Lt=he,jt=Ae,Dt=ot,Ft=ft,Ht=function(e,t){var n,r;if("string"===t&&gt(n=e.toString)&&!vt(r=ht(n,e)))return r;if(gt(n=e.valueOf)&&!vt(r=ht(n,e)))return r;if("string"!==t&&gt(n=e.toString)&&!vt(r=ht(n,e)))return r;throw new yt("Can't convert object to primitive value")},Nt=TypeError,$t=Tt("toPrimitive"),Mt=function(e,t){if(!jt(e)||Dt(e))return e;var n,r=Ft(e,$t);if(r){if(void 0===t&&(t="default"),n=Lt(r,e,t),!jt(n)||Dt(n))return n;throw new Nt("Can't convert object to primitive value")}return void 0===t&&(t="number"),Ht(e,t)},qt=ot,Bt=function(e){var t=Mt(e,"string");return qt(t)?t:t+""},Qt=Ae,Vt=N.document,Gt=Qt(Vt)&&Qt(Vt.createElement),zt=function(e){return Gt?Vt.createElement(e):{}},Jt=zt,Wt=!de&&!n((function(){return 7!==Object.defineProperty(Jt("div"),"a",{get:function(){return 7}}).a})),Xt=de,Yt=he,Zt=ge,Kt=Se,en=Oe,tn=Bt,nn=m,rn=Wt,on=Object.getOwnPropertyDescriptor;ue.f=Xt?on:function(e,t){if(e=en(e),t=tn(t),rn)try{return on(e,t)}catch(e){}if(nn(e,t))return Kt(!Yt(Zt.f,e,t),e[t])};var sn=ut,an=r,ln=ce(ce.bind),cn=function(e,t){return sn(e),void 0===t?e:an?ln(e,t):function(){return e.apply(t,arguments)}},un={},dn=de&&n((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),pn=Ae,fn=String,hn=TypeError,gn=function(e){if(pn(e))return e;throw new hn(fn(e)+" is not an object")},vn=de,yn=Wt,mn=dn,wn=gn,bn=Bt,Sn=TypeError,En=Object.defineProperty,Cn=Object.getOwnPropertyDescriptor,xn="enumerable",kn="configurable",Pn="writable";un.f=vn?mn?function(e,t,n){if(wn(e),t=bn(t),wn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Pn in n&&!n[Pn]){var r=Cn(e,t);r&&r[Pn]&&(e[t]=n.value,n={configurable:kn in n?n[kn]:r[kn],enumerable:xn in n?n[xn]:r[xn],writable:!1})}return En(e,t,n)}:En:function(e,t,n){if(wn(e),t=bn(t),wn(n),yn)try{return En(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new Sn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var In=un,Rn=Se,On=de?function(e,t,n){return In.f(e,t,Rn(1,n))}:function(e,t,n){return e[t]=n,e},_n=N,An=se,Un=ce,Tn=P,Ln=ue.f,jn=j,Dn=Ue,Fn=cn,Hn=On,Nn=m,$n=function(e){var t=function(n,r,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,o)}return An(e,this,arguments)};return t.prototype=e.prototype,t},Mn=function(e,t){var n,r,o,i,s,a,l,c,u,d=e.target,p=e.global,f=e.stat,h=e.proto,g=p?_n:f?_n[d]:_n[d]&&_n[d].prototype,v=p?Dn:Dn[d]||Hn(Dn,d,{})[d],y=v.prototype;for(i in t)r=!(n=jn(p?i:d+(f?".":"#")+i,e.forced))&&g&&Nn(g,i),a=v[i],r&&(l=e.dontCallGetSet?(u=Ln(g,i))&&u.value:g[i]),s=r&&l?l:t[i],(n||h||typeof a!=typeof s)&&(c=e.bind&&r?Fn(s,_n):e.wrap&&r?$n(s):h&&Tn(s)?Un(s):s,(e.sham||s&&s.sham||a&&a.sham)&&Hn(c,"sham",!0),Hn(v,i,c),h&&(Nn(Dn,o=d+"Prototype")||Hn(Dn,o,{}),Hn(Dn[o],i,s),e.real&&y&&(n||!y[i])&&Hn(y,i,s)))},qn={},Bn=Math.ceil,Qn=Math.floor,Vn=Math.trunc||function(e){var t=+e;return(t>0?Qn:Bn)(t)},Gn=Vn,zn=function(e){var t=+e;return t!=t||0===t?0:Gn(t)},Jn=zn,Wn=Math.max,Xn=Math.min,Yn=function(e,t){var n=Jn(e);return n<0?Wn(n+t,0):Xn(n,t)},Zn=zn,Kn=Math.min,er=function(e){var t=Zn(e);return t>0?Kn(t,9007199254740991):0},tr=function(e){return er(e.length)},nr=Oe,rr=Yn,or=tr,ir=function(e){return function(t,n,r){var o=nr(t),i=or(o);if(0===i)return!e&&-1;var s,a=rr(r,i);if(e&&n!=n){for(;i>a;)if((s=o[a++])!=s)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},sr={includes:ir(!0),indexOf:ir(!1)},ar={},lr=m,cr=Oe,ur=sr.indexOf,dr=ar,pr=l([].push),fr=function(e,t){var n,r=cr(e),o=0,i=[];for(n in r)!lr(dr,n)&&lr(r,n)&&pr(i,n);for(;t.length>o;)lr(r,n=t[o++])&&(~ur(i,n)||pr(i,n));return i},hr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],gr=fr,vr=hr.concat("length","prototype");qn.f=Object.getOwnPropertyNames||function(e){return gr(e,vr)};var yr={};yr.f=Object.getOwnPropertySymbols;var mr=Fe,wr=qn,br=yr,Sr=gn,Er=l([].concat),Cr=mr("Reflect","ownKeys")||function(e){var t=wr.f(Sr(e)),n=br.f;return n?Er(t,n(e)):t},xr=de,kr=un,Pr=Se,Ir=function(e,t,n){xr?kr.f(e,t,Pr(0,n)):e[t]=n},Rr=Cr,Or=Oe,_r=ue,Ar=Ir;Mn({target:"Object",stat:!0,sham:!de},{getOwnPropertyDescriptors:function(e){for(var t,n,r=Or(e),o=_r.f,i=Rr(r),s={},a=0;i.length>a;)void 0!==(n=o(r,t=i[a++]))&&Ar(s,t,n);return s}});var Ur=t(Ue.Object.getOwnPropertyDescriptors),Tr=de,Lr=x,jr=TypeError,Dr=Object.getOwnPropertyDescriptor,Fr=Tr&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}()?function(e,t){if(Lr(e)&&!Dr(e,"length").writable)throw new jr("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},Hr=TypeError,Nr=function(e){if(e>9007199254740991)throw Hr("Maximum allowed index exceeded");return e},$r=g,Mr=tr,qr=Fr,Br=Nr;Mn({target:"Array",proto:!0,arity:1,forced:n((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=$r(this),n=Mr(t),r=arguments.length;Br(n+r);for(var o=0;o<r;o++)t[n]=arguments[o],n++;return qr(t,n),n}});var Qr,Vr,Gr,zr=N,Jr=Ue,Wr=function(e,t){var n=Jr[e+"Prototype"],r=n&&n[t];if(r)return r;var o=zr[e],i=o&&o.prototype;return i&&i[t]},Xr=Wr("Array","push"),Yr=He,Zr=Xr,Kr=Array.prototype,eo=t((function(e){var t=e.push;return e===Kr||Yr(Kr,e)&&t===Kr.push?Zr:t})),to={},no=P,ro=N.WeakMap,oo=no(ro)&&/native code/.test(String(ro)),io=xt,so=wt("keys"),ao=function(e){return so[e]||(so[e]=io(e))},lo=oo,co=N,uo=Ae,po=On,fo=m,ho=G,go=ao,vo=ar,yo="Object already initialized",mo=co.TypeError,wo=co.WeakMap;if(lo||ho.state){var bo=ho.state||(ho.state=new wo);bo.get=bo.get,bo.has=bo.has,bo.set=bo.set,Qr=function(e,t){if(bo.has(e))throw new mo(yo);return t.facade=e,bo.set(e,t),t},Vr=function(e){return bo.get(e)||{}},Gr=function(e){return bo.has(e)}}else{var So=go("state");vo[So]=!0,Qr=function(e,t){if(fo(e,So))throw new mo(yo);return t.facade=e,po(e,So,t),t},Vr=function(e){return fo(e,So)?e[So]:{}},Gr=function(e){return fo(e,So)}}var Eo={set:Qr,get:Vr,has:Gr,enforce:function(e){return Gr(e)?Vr(e):Qr(e,{})},getterFor:function(e){return function(t){var n;if(!uo(t)||(n=Vr(t)).type!==e)throw new mo("Incompatible receiver, "+e+" required");return n}}},Co=de,xo=m,ko=Function.prototype,Po=Co&&Object.getOwnPropertyDescriptor,Io=xo(ko,"name"),Ro={EXISTS:Io,PROPER:Io&&"something"===function(){}.name,CONFIGURABLE:Io&&(!Co||Co&&Po(ko,"name").configurable)},Oo={},_o=fr,Ao=hr,Uo=Object.keys||function(e){return _o(e,Ao)},To=de,Lo=dn,jo=un,Do=gn,Fo=Oe,Ho=Uo;Oo.f=To&&!Lo?Object.defineProperties:function(e,t){Do(e);for(var n,r=Fo(t),o=Ho(t),i=o.length,s=0;i>s;)jo.f(e,n=o[s++],r[n]);return e};var No,$o=Fe("document","documentElement"),Mo=gn,qo=Oo,Bo=hr,Qo=ar,Vo=$o,Go=zt,zo="prototype",Jo="script",Wo=ao("IE_PROTO"),Xo=function(){},Yo=function(e){return"<"+Jo+">"+e+"</"+Jo+">"},Zo=function(e){e.write(Yo("")),e.close();var t=e.parentWindow.Object;return e=null,t},Ko=function(){try{No=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;Ko="undefined"!=typeof document?document.domain&&No?Zo(No):(t=Go("iframe"),n="java"+Jo+":",t.style.display="none",Vo.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(Yo("document.F=Object")),e.close(),e.F):Zo(No);for(var r=Bo.length;r--;)delete Ko[zo][Bo[r]];return Ko()};Qo[Wo]=!0;var ei,ti,ni,ri=Object.create||function(e,t){var n;return null!==e?(Xo[zo]=Mo(e),n=new Xo,Xo[zo]=null,n[Wo]=e):n=Ko(),void 0===t?n:qo.f(n,t)},oi=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),ii=m,si=P,ai=g,li=oi,ci=ao("IE_PROTO"),ui=Object,di=ui.prototype,pi=li?ui.getPrototypeOf:function(e){var t=ai(e);if(ii(t,ci))return t[ci];var n=t.constructor;return si(n)&&t instanceof n?n.prototype:t instanceof ui?di:null},fi=On,hi=function(e,t,n,r){return r&&r.enumerable?e[t]=n:fi(e,t,n),e},gi=n,vi=P,yi=Ae,mi=ri,wi=pi,bi=hi,Si=Tt("iterator"),Ei=!1;[].keys&&("next"in(ni=[].keys())?(ti=wi(wi(ni)))!==Object.prototype&&(ei=ti):Ei=!0);var Ci=!yi(ei)||gi((function(){var e={};return ei[Si].call(e)!==e}));vi((ei=Ci?{}:mi(ei))[Si])||bi(ei,Si,(function(){return this}));var xi={IteratorPrototype:ei,BUGGY_SAFARI_ITERATORS:Ei},ki={};ki[Tt("toStringTag")]="z";var Pi="[object z]"===String(ki),Ii=Pi,Ri=P,Oi=E,_i=Tt("toStringTag"),Ai=Object,Ui="Arguments"===Oi(function(){return arguments}()),Ti=Ii?Oi:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Ai(e),_i))?n:Ui?Oi(t):"Object"===(r=Oi(t))&&Ri(t.callee)?"Arguments":r},Li=Ti,ji=Pi?{}.toString:function(){return"[object "+Li(this)+"]"},Di=Pi,Fi=un.f,Hi=On,Ni=m,$i=ji,Mi=Tt("toStringTag"),qi=function(e,t,n,r){var o=n?e:e&&e.prototype;o&&(Ni(o,Mi)||Fi(o,Mi,{configurable:!0,value:t}),r&&!Di&&Hi(o,"toString",$i))},Bi=xi.IteratorPrototype,Qi=ri,Vi=Se,Gi=qi,zi=to,Ji=function(){return this},Wi=function(e,t,n,r){var o=t+" Iterator";return e.prototype=Qi(Bi,{next:Vi(+!r,n)}),Gi(e,o,!1,!0),zi[o]=Ji,e},Xi=l,Yi=ut,Zi=Ae,Ki=function(e){return Zi(e)||null===e},es=String,ts=TypeError,ns=function(e,t,n){try{return Xi(Yi(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}},rs=Ae,os=p,is=function(e){if(Ki(e))return e;throw new ts("Can't set "+es(e)+" as a prototype")},ss=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=ns(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return os(n),is(r),rs(n)?(t?e(n,r):n.__proto__=r,n):n}}():void 0),as=Mn,ls=he,cs=Ro,us=Wi,ds=pi,ps=qi,fs=hi,hs=to,gs=xi,vs=cs.PROPER,ys=gs.BUGGY_SAFARI_ITERATORS,ms=Tt("iterator"),ws="keys",bs="values",Ss="entries",Es=function(){return this},Cs=function(e,t,n,r,o,i,s){us(n,t,r);var a,l,c,u=function(e){if(e===o&&g)return g;if(!ys&&e&&e in f)return f[e];switch(e){case ws:case bs:case Ss:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",p=!1,f=e.prototype,h=f[ms]||f["@@iterator"]||o&&f[o],g=!ys&&h||u(o),v="Array"===t&&f.entries||h;if(v&&(a=ds(v.call(new e)))!==Object.prototype&&a.next&&(ps(a,d,!0,!0),hs[d]=Es),vs&&o===bs&&h&&h.name!==bs&&(p=!0,g=function(){return ls(h,this)}),o)if(l={values:u(bs),keys:i?g:u(ws),entries:u(Ss)},s)for(c in l)(ys||p||!(c in f))&&fs(f,c,l[c]);else as({target:t,proto:!0,forced:ys||p},l);return s&&f[ms]!==g&&fs(f,ms,g,{name:o}),hs[t]=g,l},xs=function(e,t){return{value:e,done:t}},ks=Oe,Ps=to,Is=Eo;un.f;var Rs=Cs,Os=xs,_s="Array Iterator",As=Is.set,Us=Is.getterFor(_s);Rs(Array,"Array",(function(e,t){As(this,{type:_s,target:ks(e),index:0,kind:t})}),(function(){var e=Us(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,Os(void 0,!0);switch(e.kind){case"keys":return Os(n,!1);case"values":return Os(t[n],!1)}return Os([n,t[n]],!1)}),"values"),Ps.Arguments=Ps.Array;var Ts=Mn,Ls=l,js=Yn,Ds=RangeError,Fs=String.fromCharCode,Hs=String.fromCodePoint,Ns=Ls([].join);Ts({target:"String",stat:!0,arity:1,forced:!!Hs&&1!==Hs.length},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,o=0;r>o;){if(t=+arguments[o++],js(t,1114111)!==t)throw new Ds(t+" is not a valid code point");n[o]=t<65536?Fs(t):Fs(55296+((t-=65536)>>10),t%1024+56320)}return Ns(n,"")}});var $s=N,Ms=de,qs=Object.getOwnPropertyDescriptor,Bs=function(e){if(!Ms)return $s[e];var t=qs($s,e);return t&&t.value},Qs=n,Vs=F,Gs=Tt("iterator"),zs=!Qs((function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),n.delete("a",2),n.delete("b",void 0),!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b")||!t.size&&Vs||!t.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Gs]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==r||"x"!==new URL("https://x",void 0).host})),Js=un,Ws=function(e,t,n){return Js.f(e,t,n)},Xs=hi,Ys=He,Zs=TypeError,Ks=function(e,t){if(Ys(t,e))return e;throw new Zs("Incorrect invocation")},ea=Ti,ta=String,na=function(e){if("Symbol"===ea(e))throw new TypeError("Cannot convert a Symbol value to a string");return ta(e)},ra=Ti,oa=ft,ia=c,sa=to,aa=Tt("iterator"),la=function(e){if(!ia(e))return oa(e,aa)||oa(e,"@@iterator")||sa[ra(e)]},ca=he,ua=ut,da=gn,pa=st,fa=la,ha=TypeError,ga=function(e,t){var n=arguments.length<2?fa(e):t;if(ua(n))return da(ca(n,e));throw new ha(pa(e)+" is not iterable")},va=TypeError,ya=function(e,t){if(e<t)throw new va("Not enough arguments");return e},ma=l([].slice),wa=ma,ba=Math.floor,Sa=function(e,t){var n=e.length;if(n<8)for(var r,o,i=1;i<n;){for(o=i,r=e[i];o&&t(e[o-1],r)>0;)e[o]=e[--o];o!==i++&&(e[o]=r)}else for(var s=ba(n/2),a=Sa(wa(e,0,s),t),l=Sa(wa(e,s),t),c=a.length,u=l.length,d=0,p=0;d<c||p<u;)e[d+p]=d<c&&p<u?t(a[d],l[p])<=0?a[d++]:l[p++]:d<c?a[d++]:l[p++];return e},Ea=Mn,Ca=N,xa=Bs,ka=Fe,Pa=he,Ia=l,Ra=de,Oa=zs,_a=hi,Aa=Ws,Ua=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:Xs(e,r,t[r],n);return e},Ta=qi,La=Wi,ja=Eo,Da=Ks,Fa=P,Ha=m,Na=cn,$a=Ti,Ma=gn,qa=Ae,Ba=na,Qa=ri,Va=Se,Ga=ga,za=la,Ja=xs,Wa=ya,Xa=Sa,Ya=Tt("iterator"),Za="URLSearchParams",Ka=Za+"Iterator",el=ja.set,tl=ja.getterFor(Za),nl=ja.getterFor(Ka),rl=xa("fetch"),ol=xa("Request"),il=xa("Headers"),sl=ol&&ol.prototype,al=il&&il.prototype,ll=Ca.TypeError,cl=Ca.encodeURIComponent,ul=String.fromCharCode,dl=ka("String","fromCodePoint"),pl=parseInt,fl=Ia("".charAt),hl=Ia([].join),gl=Ia([].push),vl=Ia("".replace),yl=Ia([].shift),ml=Ia([].splice),wl=Ia("".split),bl=Ia("".slice),Sl=Ia(/./.exec),El=/\+/g,Cl=/^[0-9a-f]+$/i,xl=function(e,t){var n=bl(e,t,t+2);return Sl(Cl,n)?pl(n,16):NaN},kl=function(e){for(var t=0,n=128;n>0&&e&n;n>>=1)t++;return t},Pl=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(31&e[0])<<6|63&e[1];break;case 3:t=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:t=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3]}return t>1114111?null:t},Il=function(e){for(var t=(e=vl(e,El," ")).length,n="",r=0;r<t;){var o=fl(e,r);if("%"===o){if("%"===fl(e,r+1)||r+3>t){n+="%",r++;continue}var i=xl(e,r+1);if(i!=i){n+=o,r++;continue}r+=2;var s=kl(i);if(0===s)o=ul(i);else{if(1===s||s>4){n+="�",r++;continue}for(var a=[i],l=1;l<s&&!(++r+3>t||"%"!==fl(e,r));){var c=xl(e,r+1);if(c!=c){r+=3;break}if(c>191||c<128)break;gl(a,c),r+=2,l++}if(a.length!==s){n+="�";continue}var u=Pl(a);null===u?n+="�":o=dl(u)}}n+=o,r++}return n},Rl=/[!'()~]|%20/g,Ol={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},_l=function(e){return Ol[e]},Al=function(e){return vl(cl(e),Rl,_l)},Ul=La((function(e,t){el(this,{type:Ka,target:tl(e).entries,index:0,kind:t})}),Za,(function(){var e=nl(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,Ja(void 0,!0);var r=t[n];switch(e.kind){case"keys":return Ja(r.key,!1);case"values":return Ja(r.value,!1)}return Ja([r.key,r.value],!1)}),!0),Tl=function(e){this.entries=[],this.url=null,void 0!==e&&(qa(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===fl(e,0)?bl(e,1):e:Ba(e)))};Tl.prototype={type:Za,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,o,i,s,a,l=this.entries,c=za(e);if(c)for(n=(t=Ga(e,c)).next;!(r=Pa(n,t)).done;){if(i=(o=Ga(Ma(r.value))).next,(s=Pa(i,o)).done||(a=Pa(i,o)).done||!Pa(i,o).done)throw new ll("Expected sequence with length 2");gl(l,{key:Ba(s.value),value:Ba(a.value)})}else for(var u in e)Ha(e,u)&&gl(l,{key:u,value:Ba(e[u])})},parseQuery:function(e){if(e)for(var t,n,r=this.entries,o=wl(e,"&"),i=0;i<o.length;)(t=o[i++]).length&&(n=wl(t,"="),gl(r,{key:Il(yl(n)),value:Il(hl(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],gl(n,Al(e.key)+"="+Al(e.value));return hl(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Ll=function(){Da(this,jl);var e=el(this,new Tl(arguments.length>0?arguments[0]:void 0));Ra||(this.size=e.entries.length)},jl=Ll.prototype;if(Ua(jl,{append:function(e,t){var n=tl(this);Wa(arguments.length,2),gl(n.entries,{key:Ba(e),value:Ba(t)}),Ra||this.length++,n.updateURL()},delete:function(e){for(var t=tl(this),n=Wa(arguments.length,1),r=t.entries,o=Ba(e),i=n<2?void 0:arguments[1],s=void 0===i?i:Ba(i),a=0;a<r.length;){var l=r[a];if(l.key!==o||void 0!==s&&l.value!==s)a++;else if(ml(r,a,1),void 0!==s)break}Ra||(this.size=r.length),t.updateURL()},get:function(e){var t=tl(this).entries;Wa(arguments.length,1);for(var n=Ba(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=tl(this).entries;Wa(arguments.length,1);for(var n=Ba(e),r=[],o=0;o<t.length;o++)t[o].key===n&&gl(r,t[o].value);return r},has:function(e){for(var t=tl(this).entries,n=Wa(arguments.length,1),r=Ba(e),o=n<2?void 0:arguments[1],i=void 0===o?o:Ba(o),s=0;s<t.length;){var a=t[s++];if(a.key===r&&(void 0===i||a.value===i))return!0}return!1},set:function(e,t){var n=tl(this);Wa(arguments.length,1);for(var r,o=n.entries,i=!1,s=Ba(e),a=Ba(t),l=0;l<o.length;l++)(r=o[l]).key===s&&(i?ml(o,l--,1):(i=!0,r.value=a));i||gl(o,{key:s,value:a}),Ra||(this.size=o.length),n.updateURL()},sort:function(){var e=tl(this);Xa(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=tl(this).entries,r=Na(e,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new Ul(this,"keys")},values:function(){return new Ul(this,"values")},entries:function(){return new Ul(this,"entries")}},{enumerable:!0}),_a(jl,Ya,jl.entries,{name:"entries"}),_a(jl,"toString",(function(){return tl(this).serialize()}),{enumerable:!0}),Ra&&Aa(jl,"size",{get:function(){return tl(this).entries.length},configurable:!0,enumerable:!0}),Ta(Ll,Za),Ea({global:!0,constructor:!0,forced:!Oa},{URLSearchParams:Ll}),!Oa&&Fa(il)){var Dl=Ia(al.has),Fl=Ia(al.set),Hl=function(e){if(qa(e)){var t,n=e.body;if($a(n)===Za)return t=e.headers?new il(e.headers):new il,Dl(t,"content-type")||Fl(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Qa(e,{body:Va(0,Ba(n)),headers:Va(0,t)})}return e};if(Fa(rl)&&Ea({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return rl(e,arguments.length>1?Hl(arguments[1]):{})}}),Fa(ol)){var Nl=function(e){return Da(this,sl),new ol(e,arguments.length>1?Hl(arguments[1]):{})};sl.constructor=Nl,Nl.prototype=sl,Ea({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Nl})}}var $l={URLSearchParams:Ll,getState:tl},Ml=l,ql=zn,Bl=na,Ql=p,Vl=Ml("".charAt),Gl=Ml("".charCodeAt),zl=Ml("".slice),Jl=function(e){return function(t,n){var r,o,i=Bl(Ql(t)),s=ql(n),a=i.length;return s<0||s>=a?e?"":void 0:(r=Gl(i,s))<55296||r>56319||s+1===a||(o=Gl(i,s+1))<56320||o>57343?e?Vl(i,s):r:e?zl(i,s,s+2):o-56320+(r-55296<<10)+65536}},Wl={codeAt:Jl(!1),charAt:Jl(!0)},Xl=Wl.charAt,Yl=na,Zl=Eo,Kl=Cs,ec=xs,tc="String Iterator",nc=Zl.set,rc=Zl.getterFor(tc);Kl(String,"String",(function(e){nc(this,{type:tc,string:Yl(e),index:0})}),(function(){var e,t=rc(this),n=t.string,r=t.index;return r>=n.length?ec(void 0,!0):(e=Xl(n,r),t.index+=e.length,ec(e,!1))}));var oc=de,ic=l,sc=he,ac=n,lc=Uo,cc=yr,uc=ge,dc=g,pc=Pe,fc=Object.assign,hc=Object.defineProperty,gc=ic([].concat),vc=!fc||ac((function(){if(oc&&1!==fc({b:1},fc(hc({},"a",{enumerable:!0,get:function(){hc(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!==fc({},e)[n]||lc(fc({},t)).join("")!==r}))?function(e,t){for(var n=dc(e),r=arguments.length,o=1,i=cc.f,s=uc.f;r>o;)for(var a,l=pc(arguments[o++]),c=i?gc(lc(l),i(l)):lc(l),u=c.length,d=0;u>d;)a=c[d++],oc&&!sc(s,l,a)||(n[a]=l[a]);return n}:fc,yc=he,mc=gn,wc=ft,bc=function(e,t,n){var r,o;mc(e);try{if(!(r=wc(e,"return"))){if("throw"===t)throw n;return n}r=yc(r,e)}catch(e){o=!0,r=e}if("throw"===t)throw n;if(o)throw r;return mc(r),n},Sc=gn,Ec=bc,Cc=to,xc=Tt("iterator"),kc=Array.prototype,Pc=function(e){return void 0!==e&&(Cc.Array===e||kc[xc]===e)},Ic=P,Rc=G,Oc=l(Function.toString);Ic(Rc.inspectSource)||(Rc.inspectSource=function(e){return Oc(e)});var _c=Rc.inspectSource,Ac=l,Uc=n,Tc=P,Lc=Ti,jc=_c,Dc=function(){},Fc=Fe("Reflect","construct"),Hc=/^\s*(?:class|function)\b/,Nc=Ac(Hc.exec),$c=!Hc.test(Dc),Mc=function(e){if(!Tc(e))return!1;try{return Fc(Dc,[],e),!0}catch(e){return!1}},qc=function(e){if(!Tc(e))return!1;switch(Lc(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return $c||!!Nc(Hc,jc(e))}catch(e){return!0}};qc.sham=!0;var Bc,Qc=!Fc||Uc((function(){var e;return Mc(Mc.call)||!Mc(Object)||!Mc((function(){e=!0}))||e}))?qc:Mc,Vc=cn,Gc=he,zc=g,Jc=function(e,t,n,r){try{return r?t(Sc(n)[0],n[1]):t(n)}catch(t){Ec(e,"throw",t)}},Wc=Pc,Xc=Qc,Yc=tr,Zc=Ir,Kc=ga,eu=la,tu=Array,nu=l,ru=2147483647,ou=/[^\0-\u007E]/,iu=/[.\u3002\uFF0E\uFF61]/g,su="Overflow: input needs wider integers to process",au=RangeError,lu=nu(iu.exec),cu=Math.floor,uu=String.fromCharCode,du=nu("".charCodeAt),pu=nu([].join),fu=nu([].push),hu=nu("".replace),gu=nu("".split),vu=nu("".toLowerCase),yu=function(e){return e+22+75*(e<26)},mu=function(e,t,n){var r=0;for(e=n?cu(e/700):e>>1,e+=cu(e/t);e>455;)e=cu(e/35),r+=36;return cu(r+36*e/(e+38))},wu=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=du(e,n++);if(o>=55296&&o<=56319&&n<r){var i=du(e,n++);56320==(64512&i)?fu(t,((1023&o)<<10)+(1023&i)+65536):(fu(t,o),n--)}else fu(t,o)}return t}(e);var n,r,o=e.length,i=128,s=0,a=72;for(n=0;n<e.length;n++)(r=e[n])<128&&fu(t,uu(r));var l=t.length,c=l;for(l&&fu(t,"-");c<o;){var u=ru;for(n=0;n<e.length;n++)(r=e[n])>=i&&r<u&&(u=r);var d=c+1;if(u-i>cu((ru-s)/d))throw new au(su);for(s+=(u-i)*d,i=u,n=0;n<e.length;n++){if((r=e[n])<i&&++s>ru)throw new au(su);if(r===i){for(var p=s,f=36;;){var h=f<=a?1:f>=a+26?26:f-a;if(p<h)break;var g=p-h,v=36-h;fu(t,uu(yu(h+g%v))),p=cu(g/v),f+=36}fu(t,uu(yu(p))),a=mu(s,d,c===l),s=0,c++}}s++,i++}return pu(t,"")},bu=Mn,Su=de,Eu=zs,Cu=N,xu=cn,ku=l,Pu=hi,Iu=Ws,Ru=Ks,Ou=m,_u=vc,Au=function(e){var t=zc(e),n=Xc(this),r=arguments.length,o=r>1?arguments[1]:void 0,i=void 0!==o;i&&(o=Vc(o,r>2?arguments[2]:void 0));var s,a,l,c,u,d,p=eu(t),f=0;if(!p||this===tu&&Wc(p))for(s=Yc(t),a=n?new this(s):tu(s);s>f;f++)d=i?o(t[f],f):t[f],Zc(a,f,d);else for(a=n?new this:[],u=(c=Kc(t,p)).next;!(l=Gc(u,c)).done;f++)d=i?Jc(c,o,[l.value,f],!0):l.value,Zc(a,f,d);return a.length=f,a},Uu=ma,Tu=Wl.codeAt,Lu=function(e){var t,n,r=[],o=gu(hu(vu(e),iu,"."),".");for(t=0;t<o.length;t++)n=o[t],fu(r,lu(ou,n)?"xn--"+wu(n):n);return pu(r,".")},ju=na,Du=qi,Fu=ya,Hu=$l,Nu=Eo,$u=Nu.set,Mu=Nu.getterFor("URL"),qu=Hu.URLSearchParams,Bu=Hu.getState,Qu=Cu.URL,Vu=Cu.TypeError,Gu=Cu.parseInt,zu=Math.floor,Ju=Math.pow,Wu=ku("".charAt),Xu=ku(/./.exec),Yu=ku([].join),Zu=ku(1..toString),Ku=ku([].pop),ed=ku([].push),td=ku("".replace),nd=ku([].shift),rd=ku("".split),od=ku("".slice),id=ku("".toLowerCase),sd=ku([].unshift),ad="Invalid scheme",ld="Invalid host",cd="Invalid port",ud=/[a-z]/i,dd=/[\d+-.a-z]/i,pd=/\d/,fd=/^0x/i,hd=/^[0-7]+$/,gd=/^\d+$/,vd=/^[\da-f]+$/i,yd=/[\0\t\n\r #%/:<>?@[\\\]^|]/,md=/[\0\t\n\r #/:<>?@[\\\]^|]/,wd=/^[\u0000-\u0020]+/,bd=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Sd=/[\t\n\r]/g,Ed=function(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)sd(t,e%256),e=zu(e/256);return Yu(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)0!==e[i]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n?r:t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),r===n?(t+=n?":":"::",o=!0):(t+=Zu(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},Cd={},xd=_u({},Cd,{" ":1,'"':1,"<":1,">":1,"`":1}),kd=_u({},xd,{"#":1,"?":1,"{":1,"}":1}),Pd=_u({},kd,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Id=function(e,t){var n=Tu(e,0);return n>32&&n<127&&!Ou(t,e)?e:encodeURIComponent(e)},Rd={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Od=function(e,t){var n;return 2===e.length&&Xu(ud,Wu(e,0))&&(":"===(n=Wu(e,1))||!t&&"|"===n)},_d=function(e){var t;return e.length>1&&Od(od(e,0,2))&&(2===e.length||"/"===(t=Wu(e,2))||"\\"===t||"?"===t||"#"===t)},Ad=function(e){return"."===e||"%2e"===id(e)},Ud={},Td={},Ld={},jd={},Dd={},Fd={},Hd={},Nd={},$d={},Md={},qd={},Bd={},Qd={},Vd={},Gd={},zd={},Jd={},Wd={},Xd={},Yd={},Zd={},Kd=function(e,t,n){var r,o,i,s=ju(e);if(t){if(o=this.parse(s))throw new Vu(o);this.searchParams=null}else{if(void 0!==n&&(r=new Kd(n,!0)),o=this.parse(s,null,r))throw new Vu(o);(i=Bu(new qu)).bindURL(this),this.searchParams=i}};Kd.prototype={type:"URL",parse:function(e,t,n){var r,o,i,s,a,l=this,c=t||Ud,u=0,d="",p=!1,f=!1,h=!1;for(e=ju(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=td(e,wd,""),e=td(e,bd,"$1")),e=td(e,Sd,""),r=Au(e);u<=r.length;){switch(o=r[u],c){case Ud:if(!o||!Xu(ud,o)){if(t)return ad;c=Ld;continue}d+=id(o),c=Td;break;case Td:if(o&&(Xu(dd,o)||"+"===o||"-"===o||"."===o))d+=id(o);else{if(":"!==o){if(t)return ad;d="",c=Ld,u=0;continue}if(t&&(l.isSpecial()!==Ou(Rd,d)||"file"===d&&(l.includesCredentials()||null!==l.port)||"file"===l.scheme&&!l.host))return;if(l.scheme=d,t)return void(l.isSpecial()&&Rd[l.scheme]===l.port&&(l.port=null));d="","file"===l.scheme?c=Vd:l.isSpecial()&&n&&n.scheme===l.scheme?c=jd:l.isSpecial()?c=Nd:"/"===r[u+1]?(c=Dd,u++):(l.cannotBeABaseURL=!0,ed(l.path,""),c=Xd)}break;case Ld:if(!n||n.cannotBeABaseURL&&"#"!==o)return ad;if(n.cannotBeABaseURL&&"#"===o){l.scheme=n.scheme,l.path=Uu(n.path),l.query=n.query,l.fragment="",l.cannotBeABaseURL=!0,c=Zd;break}c="file"===n.scheme?Vd:Fd;continue;case jd:if("/"!==o||"/"!==r[u+1]){c=Fd;continue}c=$d,u++;break;case Dd:if("/"===o){c=Md;break}c=Wd;continue;case Fd:if(l.scheme=n.scheme,o===Bc)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=Uu(n.path),l.query=n.query;else if("/"===o||"\\"===o&&l.isSpecial())c=Hd;else if("?"===o)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=Uu(n.path),l.query="",c=Yd;else{if("#"!==o){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=Uu(n.path),l.path.length--,c=Wd;continue}l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=Uu(n.path),l.query=n.query,l.fragment="",c=Zd}break;case Hd:if(!l.isSpecial()||"/"!==o&&"\\"!==o){if("/"!==o){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,c=Wd;continue}c=Md}else c=$d;break;case Nd:if(c=$d,"/"!==o||"/"!==Wu(d,u+1))continue;u++;break;case $d:if("/"!==o&&"\\"!==o){c=Md;continue}break;case Md:if("@"===o){p&&(d="%40"+d),p=!0,i=Au(d);for(var g=0;g<i.length;g++){var v=i[g];if(":"!==v||h){var y=Id(v,Pd);h?l.password+=y:l.username+=y}else h=!0}d=""}else if(o===Bc||"/"===o||"?"===o||"#"===o||"\\"===o&&l.isSpecial()){if(p&&""===d)return"Invalid authority";u-=Au(d).length+1,d="",c=qd}else d+=o;break;case qd:case Bd:if(t&&"file"===l.scheme){c=zd;continue}if(":"!==o||f){if(o===Bc||"/"===o||"?"===o||"#"===o||"\\"===o&&l.isSpecial()){if(l.isSpecial()&&""===d)return ld;if(t&&""===d&&(l.includesCredentials()||null!==l.port))return;if(s=l.parseHost(d))return s;if(d="",c=Jd,t)return;continue}"["===o?f=!0:"]"===o&&(f=!1),d+=o}else{if(""===d)return ld;if(s=l.parseHost(d))return s;if(d="",c=Qd,t===Bd)return}break;case Qd:if(!Xu(pd,o)){if(o===Bc||"/"===o||"?"===o||"#"===o||"\\"===o&&l.isSpecial()||t){if(""!==d){var m=Gu(d,10);if(m>65535)return cd;l.port=l.isSpecial()&&m===Rd[l.scheme]?null:m,d=""}if(t)return;c=Jd;continue}return cd}d+=o;break;case Vd:if(l.scheme="file","/"===o||"\\"===o)c=Gd;else{if(!n||"file"!==n.scheme){c=Wd;continue}switch(o){case Bc:l.host=n.host,l.path=Uu(n.path),l.query=n.query;break;case"?":l.host=n.host,l.path=Uu(n.path),l.query="",c=Yd;break;case"#":l.host=n.host,l.path=Uu(n.path),l.query=n.query,l.fragment="",c=Zd;break;default:_d(Yu(Uu(r,u),""))||(l.host=n.host,l.path=Uu(n.path),l.shortenPath()),c=Wd;continue}}break;case Gd:if("/"===o||"\\"===o){c=zd;break}n&&"file"===n.scheme&&!_d(Yu(Uu(r,u),""))&&(Od(n.path[0],!0)?ed(l.path,n.path[0]):l.host=n.host),c=Wd;continue;case zd:if(o===Bc||"/"===o||"\\"===o||"?"===o||"#"===o){if(!t&&Od(d))c=Wd;else if(""===d){if(l.host="",t)return;c=Jd}else{if(s=l.parseHost(d))return s;if("localhost"===l.host&&(l.host=""),t)return;d="",c=Jd}continue}d+=o;break;case Jd:if(l.isSpecial()){if(c=Wd,"/"!==o&&"\\"!==o)continue}else if(t||"?"!==o)if(t||"#"!==o){if(o!==Bc&&(c=Wd,"/"!==o))continue}else l.fragment="",c=Zd;else l.query="",c=Yd;break;case Wd:if(o===Bc||"/"===o||"\\"===o&&l.isSpecial()||!t&&("?"===o||"#"===o)){if(".."===(a=id(a=d))||"%2e."===a||".%2e"===a||"%2e%2e"===a?(l.shortenPath(),"/"===o||"\\"===o&&l.isSpecial()||ed(l.path,"")):Ad(d)?"/"===o||"\\"===o&&l.isSpecial()||ed(l.path,""):("file"===l.scheme&&!l.path.length&&Od(d)&&(l.host&&(l.host=""),d=Wu(d,0)+":"),ed(l.path,d)),d="","file"===l.scheme&&(o===Bc||"?"===o||"#"===o))for(;l.path.length>1&&""===l.path[0];)nd(l.path);"?"===o?(l.query="",c=Yd):"#"===o&&(l.fragment="",c=Zd)}else d+=Id(o,kd);break;case Xd:"?"===o?(l.query="",c=Yd):"#"===o?(l.fragment="",c=Zd):o!==Bc&&(l.path[0]+=Id(o,Cd));break;case Yd:t||"#"!==o?o!==Bc&&("'"===o&&l.isSpecial()?l.query+="%27":l.query+="#"===o?"%23":Id(o,Cd)):(l.fragment="",c=Zd);break;case Zd:o!==Bc&&(l.fragment+=Id(o,xd))}u++}},parseHost:function(e){var t,n,r;if("["===Wu(e,0)){if("]"!==Wu(e,e.length-1))return ld;if(t=function(e){var t,n,r,o,i,s,a,l=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,p=function(){return Wu(e,d)};if(":"===p()){if(":"!==Wu(e,1))return;d+=2,u=++c}for(;p();){if(8===c)return;if(":"!==p()){for(t=n=0;n<4&&Xu(vd,p());)t=16*t+Gu(p(),16),d++,n++;if("."===p()){if(0===n)return;if(d-=n,c>6)return;for(r=0;p();){if(o=null,r>0){if(!("."===p()&&r<4))return;d++}if(!Xu(pd,p()))return;for(;Xu(pd,p());){if(i=Gu(p(),10),null===o)o=i;else{if(0===o)return;o=10*o+i}if(o>255)return;d++}l[c]=256*l[c]+o,2!=++r&&4!==r||c++}if(4!==r)return;break}if(":"===p()){if(d++,!p())return}else if(p())return;l[c++]=t}else{if(null!==u)return;d++,u=++c}}if(null!==u)for(s=c-u,c=7;0!==c&&s>0;)a=l[c],l[c--]=l[u+s-1],l[u+--s]=a;else if(8!==c)return;return l}(od(e,1,-1)),!t)return ld;this.host=t}else if(this.isSpecial()){if(e=Lu(e),Xu(yd,e))return ld;if(t=function(e){var t,n,r,o,i,s,a,l=rd(e,".");if(l.length&&""===l[l.length-1]&&l.length--,(t=l.length)>4)return e;for(n=[],r=0;r<t;r++){if(""===(o=l[r]))return e;if(i=10,o.length>1&&"0"===Wu(o,0)&&(i=Xu(fd,o)?16:8,o=od(o,8===i?1:2)),""===o)s=0;else{if(!Xu(10===i?gd:8===i?hd:vd,o))return e;s=Gu(o,i)}ed(n,s)}for(r=0;r<t;r++)if(s=n[r],r===t-1){if(s>=Ju(256,5-t))return null}else if(s>255)return null;for(a=Ku(n),r=0;r<n.length;r++)a+=n[r]*Ju(256,3-r);return a}(e),null===t)return ld;this.host=t}else{if(Xu(md,e))return ld;for(t="",n=Au(e),r=0;r<n.length;r++)t+=Id(n[r],Cd);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return Ou(Rd,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&Od(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,s=e.path,a=e.query,l=e.fragment,c=t+":";return null!==o?(c+="//",e.includesCredentials()&&(c+=n+(r?":"+r:"")+"@"),c+=Ed(o),null!==i&&(c+=":"+i)):"file"===t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+Yu(s,"/"):"",null!==a&&(c+="?"+a),null!==l&&(c+="#"+l),c},setHref:function(e){var t=this.parse(e);if(t)throw new Vu(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new ep(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+Ed(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(ju(e)+":",Ud)},getUsername:function(){return this.username},setUsername:function(e){var t=Au(ju(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=Id(t[n],Pd)}},getPassword:function(){return this.password},setPassword:function(e){var t=Au(ju(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=Id(t[n],Pd)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?Ed(e):Ed(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,qd)},getHostname:function(){var e=this.host;return null===e?"":Ed(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Bd)},getPort:function(){var e=this.port;return null===e?"":ju(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=ju(e))?this.port=null:this.parse(e,Qd))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Yu(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Jd))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=ju(e))?this.query=null:("?"===Wu(e,0)&&(e=od(e,1)),this.query="",this.parse(e,Yd)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=ju(e))?("#"===Wu(e,0)&&(e=od(e,1)),this.fragment="",this.parse(e,Zd)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var ep=function(e){var t=Ru(this,tp),n=Fu(arguments.length,1)>1?arguments[1]:void 0,r=$u(t,new Kd(e,!1,n));Su||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},tp=ep.prototype,np=function(e,t){return{get:function(){return Mu(this)[e]()},set:t&&function(e){return Mu(this)[t](e)},configurable:!0,enumerable:!0}};if(Su&&(Iu(tp,"href",np("serialize","setHref")),Iu(tp,"origin",np("getOrigin")),Iu(tp,"protocol",np("getProtocol","setProtocol")),Iu(tp,"username",np("getUsername","setUsername")),Iu(tp,"password",np("getPassword","setPassword")),Iu(tp,"host",np("getHost","setHost")),Iu(tp,"hostname",np("getHostname","setHostname")),Iu(tp,"port",np("getPort","setPort")),Iu(tp,"pathname",np("getPathname","setPathname")),Iu(tp,"search",np("getSearch","setSearch")),Iu(tp,"searchParams",np("getSearchParams")),Iu(tp,"hash",np("getHash","setHash"))),Pu(tp,"toJSON",(function(){return Mu(this).serialize()}),{enumerable:!0}),Pu(tp,"toString",(function(){return Mu(this).serialize()}),{enumerable:!0}),Qu){var rp=Qu.createObjectURL,op=Qu.revokeObjectURL;rp&&Pu(ep,"createObjectURL",xu(rp,Qu)),op&&Pu(ep,"revokeObjectURL",xu(op,Qu))}Du(ep,"URL"),bu({global:!0,constructor:!0,forced:!Eu,sham:!Su},{URL:ep});var ip=Mn,sp=n,ap=ya,lp=na,cp=zs,up=Fe("URL"),dp=cp&&sp((function(){up.canParse()})),pp=sp((function(){return 1!==up.canParse.length}));ip({target:"URL",stat:!0,forced:!dp||pp},{canParse:function(e){var t=ap(arguments.length,1),n=lp(e),r=t<2||void 0===arguments[1]?void 0:lp(arguments[1]);try{return!!new up(n,r)}catch(e){return!1}}});var fp=Mn,hp=ya,gp=na,vp=zs,yp=Fe("URL");fp({target:"URL",stat:!0,forced:!vp},{parse:function(e){var t=hp(arguments.length,1),n=gp(e),r=t<2||void 0===arguments[1]?void 0:gp(arguments[1]);try{return new yp(n,r)}catch(e){return null}}});var mp=t(Ue.URL),wp=st,bp=TypeError,Sp=g,Ep=tr,Cp=Fr,xp=function(e,t){if(!delete e[t])throw new bp("Cannot delete property "+wp(t)+" of "+wp(e))},kp=Nr;Mn({target:"Array",proto:!0,arity:1,forced:1!==[].unshift(0)||!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}}()},{unshift:function(e){var t=Sp(this),n=Ep(t),r=arguments.length;if(r){kp(n+r);for(var o=n;o--;){var i=o+r;o in t?t[i]=t[o]:xp(t,i)}for(var s=0;s<r;s++)t[s]=arguments[s]}return Cp(t,n+r)}});var Pp=Wr("Array","unshift"),Ip=He,Rp=Pp,Op=Array.prototype,_p=t((function(e){var t=e.unshift;return e===Op||Ip(Op,e)&&t===Op.unshift?Rp:t})),Ap=sr.includes;Mn({target:"Array",proto:!0,forced:n((function(){return!Array(1).includes()}))},{includes:function(e){return Ap(this,e,arguments.length>1?arguments[1]:void 0)}});var Up=Wr("Array","includes"),Tp=Ae,Lp=E,jp=Tt("match"),Dp=function(e){var t;return Tp(e)&&(void 0!==(t=e[jp])?!!t:"RegExp"===Lp(e))},Fp=TypeError,Hp=Tt("match"),Np=Mn,$p=function(e){if(Dp(e))throw new Fp("The method doesn't accept regular expressions");return e},Mp=p,qp=na,Bp=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Hp]=!1,"/./"[e](t)}catch(e){}}return!1},Qp=l("".indexOf);Np({target:"String",proto:!0,forced:!Bp("includes")},{includes:function(e){return!!~Qp(qp(Mp(this)),qp($p(e)),arguments.length>1?arguments[1]:void 0)}});var Vp=Wr("String","includes"),Gp=He,zp=Up,Jp=Vp,Wp=Array.prototype,Xp=String.prototype,Yp=t((function(e){var t=e.includes;return e===Wp||Gp(Wp,e)&&t===Wp.includes?zp:"string"==typeof e||e===Xp||Gp(Xp,e)&&t===Xp.includes?Jp:t})),Zp=Mn,Kp=Date,ef=l(Kp.prototype.getTime);Zp({target:"Date",stat:!0},{now:function(){return ef(new Kp)}});var tf=t(Ue.Date.now),nf=de,rf=n,of=l,sf=pi,af=Uo,lf=Oe,cf=of(ge.f),uf=of([].push),df=nf&&rf((function(){var e=Object.create(null);return e[2]=2,!cf(e,2)})),pf=function(e){return function(t){for(var n,r=lf(t),o=af(r),i=df&&null===sf(r),s=o.length,a=0,l=[];s>a;)n=o[a++],nf&&!(i?n in r:cf(r,n))||uf(l,e?[n,r[n]]:r[n]);return l}},ff={entries:pf(!0),values:pf(!1)}.entries;Mn({target:"Object",stat:!0},{entries:function(e){return ff(e)}});var hf=t(Ue.Object.entries),gf=m,vf=Cr,yf=ue,mf=un,wf=Ae,bf=On,Sf=Error,Ef=l("".replace),Cf=String(new Sf("zxcasd").stack),xf=/\n\s*at [^:]*:[^\n]*/,kf=xf.test(Cf),Pf=Se,If=!n((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",Pf(1,7)),7!==e.stack)})),Rf=On,Of=function(e,t){if(kf&&"string"==typeof e&&!Sf.prepareStackTrace)for(;t--;)e=Ef(e,xf,"");return e},_f=If,Af=Error.captureStackTrace,Uf=cn,Tf=he,Lf=gn,jf=st,Df=Pc,Ff=tr,Hf=He,Nf=ga,$f=la,Mf=bc,qf=TypeError,Bf=function(e,t){this.stopped=e,this.result=t},Qf=Bf.prototype,Vf=function(e,t,n){var r,o,i,s,a,l,c,u=n&&n.that,d=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_RECORD),f=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),g=Uf(t,u),v=function(e){return r&&Mf(r,"normal",e),new Bf(!0,e)},y=function(e){return d?(Lf(e),h?g(e[0],e[1],v):g(e[0],e[1])):h?g(e,v):g(e)};if(p)r=e.iterator;else if(f)r=e;else{if(!(o=$f(e)))throw new qf(jf(e)+" is not iterable");if(Df(o)){for(i=0,s=Ff(e);s>i;i++)if((a=y(e[i]))&&Hf(Qf,a))return a;return new Bf(!1)}r=Nf(e,o)}for(l=p?e.next:r.next;!(c=Tf(l,r)).done;){try{a=y(c.value)}catch(e){Mf(r,"throw",e)}if("object"==typeof a&&a&&Hf(Qf,a))return a}return new Bf(!1)},Gf=na,zf=Mn,Jf=He,Wf=pi,Xf=ss,Yf=function(e,t,n){for(var r=vf(t),o=mf.f,i=yf.f,s=0;s<r.length;s++){var a=r[s];gf(e,a)||n&&gf(n,a)||o(e,a,i(t,a))}},Zf=ri,Kf=On,eh=Se,th=function(e,t){wf(t)&&"cause"in t&&bf(e,"cause",t.cause)},nh=function(e,t,n,r){_f&&(Af?Af(e,t):Rf(e,"stack",Of(n,r)))},rh=Vf,oh=function(e,t){return void 0===e?arguments.length<2?"":t:Gf(e)},ih=Tt("toStringTag"),sh=Error,ah=[].push,lh=function(e,t){var n,r=Jf(ch,this);Xf?n=Xf(new sh,r?Wf(this):ch):(n=r?this:Zf(ch),Kf(n,ih,"Error")),void 0!==t&&Kf(n,"message",oh(t)),nh(n,lh,n.stack,1),arguments.length>2&&th(n,arguments[2]);var o=[];return rh(e,ah,{that:o}),Kf(n,"errors",o),n};Xf?Xf(lh,sh):Yf(lh,sh,{name:!0});var ch=lh.prototype=Zf(sh.prototype,{constructor:eh(1,lh),message:eh(1,""),name:eh(1,"AggregateError")});zf({global:!0,constructor:!0,arity:2},{AggregateError:lh});var uh,dh,ph,fh,hh=N,gh=Me,vh=E,yh=function(e){return gh.slice(0,e.length)===e},mh=yh("Bun/")?"BUN":yh("Cloudflare-Workers")?"CLOUDFLARE":yh("Deno/")?"DENO":yh("Node.js/")?"NODE":hh.Bun&&"string"==typeof Bun.version?"BUN":hh.Deno&&"object"==typeof Deno.version?"DENO":"process"===vh(hh.process)?"NODE":hh.window&&hh.document?"BROWSER":"REST",wh="NODE"===mh,bh=Fe,Sh=Ws,Eh=de,Ch=Tt("species"),xh=Qc,kh=st,Ph=TypeError,Ih=gn,Rh=function(e){if(xh(e))return e;throw new Ph(kh(e)+" is not a constructor")},Oh=c,_h=Tt("species"),Ah=function(e,t){var n,r=Ih(e).constructor;return void 0===r||Oh(n=Ih(r)[_h])?t:Rh(n)},Uh=/(?:ipad|iphone|ipod).*applewebkit/i.test(Me),Th=N,Lh=se,jh=cn,Dh=P,Fh=m,Hh=n,Nh=$o,$h=ma,Mh=zt,qh=ya,Bh=Uh,Qh=wh,Vh=Th.setImmediate,Gh=Th.clearImmediate,zh=Th.process,Jh=Th.Dispatch,Wh=Th.Function,Xh=Th.MessageChannel,Yh=Th.String,Zh=0,Kh={},eg="onreadystatechange";Hh((function(){uh=Th.location}));var tg=function(e){if(Fh(Kh,e)){var t=Kh[e];delete Kh[e],t()}},ng=function(e){return function(){tg(e)}},rg=function(e){tg(e.data)},og=function(e){Th.postMessage(Yh(e),uh.protocol+"//"+uh.host)};Vh&&Gh||(Vh=function(e){qh(arguments.length,1);var t=Dh(e)?e:Wh(e),n=$h(arguments,1);return Kh[++Zh]=function(){Lh(t,void 0,n)},dh(Zh),Zh},Gh=function(e){delete Kh[e]},Qh?dh=function(e){zh.nextTick(ng(e))}:Jh&&Jh.now?dh=function(e){Jh.now(ng(e))}:Xh&&!Bh?(fh=(ph=new Xh).port2,ph.port1.onmessage=rg,dh=jh(fh.postMessage,fh)):Th.addEventListener&&Dh(Th.postMessage)&&!Th.importScripts&&uh&&"file:"!==uh.protocol&&!Hh(og)?(dh=og,Th.addEventListener("message",rg,!1)):dh=eg in Mh("script")?function(e){Nh.appendChild(Mh("script"))[eg]=function(){Nh.removeChild(this),tg(e)}}:function(e){setTimeout(ng(e),0)});var ig={set:Vh,clear:Gh},sg=function(){this.head=null,this.tail=null};sg.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var ag,lg,cg,ug,dg,pg=sg,fg=/ipad|iphone|ipod/i.test(Me)&&"undefined"!=typeof Pebble,hg=/web0s(?!.*chrome)/i.test(Me),gg=N,vg=Bs,yg=cn,mg=ig.set,wg=pg,bg=Uh,Sg=fg,Eg=hg,Cg=wh,xg=gg.MutationObserver||gg.WebKitMutationObserver,kg=gg.document,Pg=gg.process,Ig=gg.Promise,Rg=vg("queueMicrotask");if(!Rg){var Og=new wg,_g=function(){var e,t;for(Cg&&(e=Pg.domain)&&e.exit();t=Og.get();)try{t()}catch(e){throw Og.head&&ag(),e}e&&e.enter()};bg||Cg||Eg||!xg||!kg?!Sg&&Ig&&Ig.resolve?((ug=Ig.resolve(void 0)).constructor=Ig,dg=yg(ug.then,ug),ag=function(){dg(_g)}):Cg?ag=function(){Pg.nextTick(_g)}:(mg=yg(mg,gg),ag=function(){mg(_g)}):(lg=!0,cg=kg.createTextNode(""),new xg(_g).observe(cg,{characterData:!0}),ag=function(){cg.data=lg=!lg}),Rg=function(e){Og.head||ag(),Og.add(e)}}var Ag=Rg,Ug=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Tg=N.Promise,Lg=N,jg=Tg,Dg=P,Fg=j,Hg=_c,Ng=Tt,$g=mh,Mg=Je,qg=jg&&jg.prototype,Bg=Ng("species"),Qg=!1,Vg=Dg(Lg.PromiseRejectionEvent),Gg=Fg("Promise",(function(){var e=Hg(jg),t=e!==String(jg);if(!t&&66===Mg)return!0;if(!qg.catch||!qg.finally)return!0;if(!Mg||Mg<51||!/native code/.test(e)){var n=new jg((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[Bg]=r,!(Qg=n.then((function(){}))instanceof r))return!0}return!(t||"BROWSER"!==$g&&"DENO"!==$g||Vg)})),zg={CONSTRUCTOR:Gg,REJECTION_EVENT:Vg,SUBCLASSING:Qg},Jg={},Wg=ut,Xg=TypeError,Yg=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw new Xg("Bad Promise constructor");t=e,n=r})),this.resolve=Wg(t),this.reject=Wg(n)};Jg.f=function(e){return new Yg(e)};var Zg,Kg,ev=Mn,tv=wh,nv=N,rv=he,ov=hi,iv=qi,sv=function(e){var t=bh(e);Eh&&t&&!t[Ch]&&Sh(t,Ch,{configurable:!0,get:function(){return this}})},av=ut,lv=P,cv=Ae,uv=Ks,dv=Ah,pv=ig.set,fv=Ag,hv=function(e,t){try{1===arguments.length?console.error(e):console.error(e,t)}catch(e){}},gv=Ug,vv=pg,yv=Eo,mv=Tg,wv=zg,bv=Jg,Sv="Promise",Ev=wv.CONSTRUCTOR,Cv=wv.REJECTION_EVENT,xv=yv.getterFor(Sv),kv=yv.set,Pv=mv&&mv.prototype,Iv=mv,Rv=Pv,Ov=nv.TypeError,_v=nv.document,Av=nv.process,Uv=bv.f,Tv=Uv,Lv=!!(_v&&_v.createEvent&&nv.dispatchEvent),jv="unhandledrejection",Dv=function(e){var t;return!(!cv(e)||!lv(t=e.then))&&t},Fv=function(e,t){var n,r,o,i=t.value,s=1===t.state,a=s?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{a?(s||(2===t.rejection&&qv(t),t.rejection=1),!0===a?n=i:(u&&u.enter(),n=a(i),u&&(u.exit(),o=!0)),n===e.promise?c(new Ov("Promise-chain cycle")):(r=Dv(n))?rv(r,n,l,c):l(n)):c(i)}catch(e){u&&!o&&u.exit(),c(e)}},Hv=function(e,t){e.notified||(e.notified=!0,fv((function(){for(var n,r=e.reactions;n=r.get();)Fv(n,e);e.notified=!1,t&&!e.rejection&&$v(e)})))},Nv=function(e,t,n){var r,o;Lv?((r=_v.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),nv.dispatchEvent(r)):r={promise:t,reason:n},!Cv&&(o=nv["on"+e])?o(r):e===jv&&hv("Unhandled promise rejection",n)},$v=function(e){rv(pv,nv,(function(){var t,n=e.facade,r=e.value;if(Mv(e)&&(t=gv((function(){tv?Av.emit("unhandledRejection",r,n):Nv(jv,n,r)})),e.rejection=tv||Mv(e)?2:1,t.error))throw t.value}))},Mv=function(e){return 1!==e.rejection&&!e.parent},qv=function(e){rv(pv,nv,(function(){var t=e.facade;tv?Av.emit("rejectionHandled",t):Nv("rejectionhandled",t,e.value)}))},Bv=function(e,t,n){return function(r){e(t,r,n)}},Qv=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Hv(e,!0))},Vv=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new Ov("Promise can't be resolved itself");var r=Dv(t);r?fv((function(){var n={done:!1};try{rv(r,t,Bv(Vv,n,e),Bv(Qv,n,e))}catch(t){Qv(n,t,e)}})):(e.value=t,e.state=1,Hv(e,!1))}catch(t){Qv({done:!1},t,e)}}};Ev&&(Rv=(Iv=function(e){uv(this,Rv),av(e),rv(Zg,this);var t=xv(this);try{e(Bv(Vv,t),Bv(Qv,t))}catch(e){Qv(t,e)}}).prototype,(Zg=function(e){kv(this,{type:Sv,done:!1,notified:!1,parent:!1,reactions:new vv,rejection:!1,state:0,value:null})}).prototype=ov(Rv,"then",(function(e,t){var n=xv(this),r=Uv(dv(this,Iv));return n.parent=!0,r.ok=!lv(e)||e,r.fail=lv(t)&&t,r.domain=tv?Av.domain:void 0,0===n.state?n.reactions.add(r):fv((function(){Fv(r,n)})),r.promise})),Kg=function(){var e=new Zg,t=xv(e);this.promise=e,this.resolve=Bv(Vv,t),this.reject=Bv(Qv,t)},bv.f=Uv=function(e){return e===Iv||undefined===e?new Kg(e):Tv(e)}),ev({global:!0,constructor:!0,wrap:!0,forced:Ev},{Promise:Iv}),iv(Iv,Sv,!1,!0),sv(Sv);var Gv=Tt("iterator"),zv=!1;try{var Jv=0,Wv={next:function(){return{done:!!Jv++}},return:function(){zv=!0}};Wv[Gv]=function(){return this},Array.from(Wv,(function(){throw 2}))}catch(e){}var Xv=Tg,Yv=function(e,t){try{if(!t&&!zv)return!1}catch(e){return!1}var n=!1;try{var r={};r[Gv]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Zv=zg.CONSTRUCTOR||!Yv((function(e){Xv.all(e).then(void 0,(function(){}))})),Kv=he,ey=ut,ty=Jg,ny=Ug,ry=Vf;Mn({target:"Promise",stat:!0,forced:Zv},{all:function(e){var t=this,n=ty.f(t),r=n.resolve,o=n.reject,i=ny((function(){var n=ey(t.resolve),i=[],s=0,a=1;ry(e,(function(e){var l=s++,c=!1;a++,Kv(n,t,e).then((function(e){c||(c=!0,i[l]=e,--a||r(i))}),o)})),--a||r(i)}));return i.error&&o(i.value),n.promise}});var oy=Mn,iy=zg.CONSTRUCTOR;Tg&&Tg.prototype,oy({target:"Promise",proto:!0,forced:iy,real:!0},{catch:function(e){return this.then(void 0,e)}});var sy=he,ay=ut,ly=Jg,cy=Ug,uy=Vf;Mn({target:"Promise",stat:!0,forced:Zv},{race:function(e){var t=this,n=ly.f(t),r=n.reject,o=cy((function(){var o=ay(t.resolve);uy(e,(function(e){sy(o,t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var dy=Jg;Mn({target:"Promise",stat:!0,forced:zg.CONSTRUCTOR},{reject:function(e){var t=dy.f(this);return(0,t.reject)(e),t.promise}});var py=gn,fy=Ae,hy=Jg,gy=function(e,t){if(py(e),fy(t)&&t.constructor===e)return t;var n=hy.f(e);return(0,n.resolve)(t),n.promise},vy=Mn,yy=Tg,my=zg.CONSTRUCTOR,wy=gy,by=Fe("Promise"),Sy=!my;vy({target:"Promise",stat:!0,forced:true},{resolve:function(e){return wy(Sy&&this===by?yy:this,e)}});var Ey=he,Cy=ut,xy=Jg,ky=Ug,Py=Vf;Mn({target:"Promise",stat:!0,forced:Zv},{allSettled:function(e){var t=this,n=xy.f(t),r=n.resolve,o=n.reject,i=ky((function(){var n=Cy(t.resolve),o=[],i=0,s=1;Py(e,(function(e){var a=i++,l=!1;s++,Ey(n,t,e).then((function(e){l||(l=!0,o[a]={status:"fulfilled",value:e},--s||r(o))}),(function(e){l||(l=!0,o[a]={status:"rejected",reason:e},--s||r(o))}))})),--s||r(o)}));return i.error&&o(i.value),n.promise}});var Iy=he,Ry=ut,Oy=Fe,_y=Jg,Ay=Ug,Uy=Vf,Ty="No one promise resolved";Mn({target:"Promise",stat:!0,forced:Zv},{any:function(e){var t=this,n=Oy("AggregateError"),r=_y.f(t),o=r.resolve,i=r.reject,s=Ay((function(){var r=Ry(t.resolve),s=[],a=0,l=1,c=!1;Uy(e,(function(e){var u=a++,d=!1;l++,Iy(r,t,e).then((function(e){d||c||(c=!0,o(e))}),(function(e){d||c||(d=!0,s[u]=e,--l||i(new n(s,Ty)))}))})),--l||i(new n(s,Ty))}));return s.error&&i(s.value),r.promise}});var Ly=Jg;Mn({target:"Promise",stat:!0},{withResolvers:function(){var e=Ly.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var jy=Mn,Dy=Tg,Fy=n,Hy=Fe,Ny=P,$y=Ah,My=gy,qy=Dy&&Dy.prototype;jy({target:"Promise",proto:!0,real:!0,forced:!!Dy&&Fy((function(){qy.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=$y(this,Hy("Promise")),n=Ny(e);return this.then(n?function(n){return My(t,e()).then((function(){return n}))}:e,n?function(n){return My(t,e()).then((function(){throw n}))}:e)}});var By=Ue.Promise,Qy={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Vy=N,Gy=qi,zy=to;for(var Jy in Qy)Gy(Vy[Jy],Jy),zy[Jy]=zy.Array;var Wy=By,Xy=Mn,Yy=se,Zy=ma,Ky=Jg,em=ut,tm=Ug,nm=N.Promise,rm=!1;Xy({target:"Promise",stat:!0,forced:!nm||!nm.try||tm((function(){nm.try((function(e){rm=8===e}),8)})).error||!rm},{try:function(e){var t=arguments.length>1?Zy(arguments,1):[],n=Ky.f(this),r=tm((function(){return Yy(em(e),void 0,t)}));return(r.error?n.reject:n.resolve)(r.value),n.promise}});var om=t(Wy),im=Wr("Array","values"),sm=Ti,am=m,lm=He,cm=im,um=Array.prototype,dm={DOMTokenList:!0,NodeList:!0},pm=t((function(e){var t=e.values;return e===um||lm(um,e)&&t===um.values||am(dm,sm(e))?cm:t}));Mn({target:"Object",stat:!0},{ownProp:m});var fm=t(Ue.Object.ownProp),hm="\t\n\v\f\r                　\u2028\u2029\ufeff",gm=p,vm=na,ym=hm,mm=l("".replace),wm=RegExp("^["+ym+"]+"),bm=RegExp("(^|[^"+ym+"])["+ym+"]+$"),Sm=function(e){return function(t){var n=vm(gm(t));return 1&e&&(n=mm(n,wm,"")),2&e&&(n=mm(n,bm,"$1")),n}},Em={start:Sm(1),end:Sm(2),trim:Sm(3)},Cm=Ro.PROPER,xm=n,km=hm,Pm=Em.trim;Mn({target:"String",proto:!0,forced:function(e){return xm((function(){return!!km[e]()||"​᠎"!=="​᠎"[e]()||Cm&&km[e].name!==e}))}("trim")},{trim:function(){return Pm(this)}});var Im=Wr("String","trim"),Rm=He,Om=Im,_m=String.prototype,Am=t((function(e){var t=e.trim;return"string"==typeof e||e===_m||Rm(_m,e)&&t===_m.trim?Om:t})),Um=g,Tm=Uo;Mn({target:"Object",stat:!0,forced:n((function(){Tm(1)}))},{keys:function(e){return Tm(Um(e))}});var Lm=l,jm=m,Dm=SyntaxError,Fm=parseInt,Hm=String.fromCharCode,Nm=Lm("".charAt),$m=Lm("".slice),Mm=Lm(/./.exec),qm={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"},Bm=/^[\da-f]{4}$/i,Qm=/^[\u0000-\u001F]$/,Vm=Mn,Gm=de,zm=N,Jm=Fe,Wm=l,Xm=he,Ym=P,Zm=Ae,Km=x,ew=m,tw=na,nw=tr,rw=Ir,ow=n,iw=function(e,t){for(var n=!0,r="";t<e.length;){var o=Nm(e,t);if("\\"===o){var i=$m(e,t,t+2);if(jm(qm,i))r+=qm[i],t+=2;else{if("\\u"!==i)throw new Dm('Unknown escape sequence: "'+i+'"');var s=$m(e,t+=2,t+4);if(!Mm(Bm,s))throw new Dm("Bad Unicode escape at: "+t);r+=Hm(Fm(s,16)),t+=4}}else{if('"'===o){n=!1,t++;break}if(Mm(Qm,o))throw new Dm("Bad control character in string literal at: "+t);r+=o,t++}}if(n)throw new Dm("Unterminated string at: "+t);return{value:r,end:t}},sw=Ze,aw=zm.JSON,lw=zm.Number,cw=zm.SyntaxError,uw=aw&&aw.parse,dw=Jm("Object","keys"),pw=Object.getOwnPropertyDescriptor,fw=Wm("".charAt),hw=Wm("".slice),gw=Wm(/./.exec),vw=Wm([].push),yw=/^\d$/,mw=/^[1-9]$/,ww=/^[\d-]$/,bw=/^[\t\n\r ]$/,Sw=function(e,t,n,r){var o,i,s,a,l,c=e[t],u=r&&c===r.value,d=u&&"string"==typeof r.source?{source:r.source}:{};if(Zm(c)){var p=Km(c),f=u?r.nodes:p?[]:{};if(p)for(o=f.length,s=nw(c),a=0;a<s;a++)Ew(c,a,Sw(c,""+a,n,a<o?f[a]:void 0));else for(i=dw(c),s=nw(i),a=0;a<s;a++)l=i[a],Ew(c,l,Sw(c,l,n,ew(f,l)?f[l]:void 0))}return Xm(n,e,t,c,d)},Ew=function(e,t,n){if(Gm){var r=pw(e,t);if(r&&!r.configurable)return}void 0===n?delete e[t]:rw(e,t,n)},Cw=function(e,t,n,r){this.value=e,this.end=t,this.source=n,this.nodes=r},xw=function(e,t){this.source=e,this.index=t};xw.prototype={fork:function(e){return new xw(this.source,e)},parse:function(){var e=this.source,t=this.skip(bw,this.index),n=this.fork(t),r=fw(e,t);if(gw(ww,r))return n.number();switch(r){case"{":return n.object();case"[":return n.array();case'"':return n.string();case"t":return n.keyword(!0);case"f":return n.keyword(!1);case"n":return n.keyword(null)}throw new cw('Unexpected character: "'+r+'" at: '+t)},node:function(e,t,n,r,o){return new Cw(t,r,e?null:hw(this.source,n,r),o)},object:function(){for(var e=this.source,t=this.index+1,n=!1,r={},o={};t<e.length;){if(t=this.until(['"',"}"],t),"}"===fw(e,t)&&!n){t++;break}var i=this.fork(t).string(),s=i.value;t=i.end,t=this.until([":"],t)+1,t=this.skip(bw,t),i=this.fork(t).parse(),rw(o,s,i),rw(r,s,i.value),t=this.until([",","}"],i.end);var a=fw(e,t);if(","===a)n=!0,t++;else if("}"===a){t++;break}}return this.node(1,r,this.index,t,o)},array:function(){for(var e=this.source,t=this.index+1,n=!1,r=[],o=[];t<e.length;){if(t=this.skip(bw,t),"]"===fw(e,t)&&!n){t++;break}var i=this.fork(t).parse();if(vw(o,i),vw(r,i.value),t=this.until([",","]"],i.end),","===fw(e,t))n=!0,t++;else if("]"===fw(e,t)){t++;break}}return this.node(1,r,this.index,t,o)},string:function(){var e=this.index,t=iw(this.source,this.index+1);return this.node(0,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,n=t;if("-"===fw(e,n)&&n++,"0"===fw(e,n))n++;else{if(!gw(mw,fw(e,n)))throw new cw("Failed to parse number at: "+n);n=this.skip(yw,n+1)}if(("."===fw(e,n)&&(n=this.skip(yw,n+1)),"e"===fw(e,n)||"E"===fw(e,n))&&(n++,"+"!==fw(e,n)&&"-"!==fw(e,n)||n++,n===(n=this.skip(yw,n))))throw new cw("Failed to parse number's exponent value at: "+n);return this.node(0,lw(hw(e,t,n)),t,n)},keyword:function(e){var t=""+e,n=this.index,r=n+t.length;if(hw(this.source,n,r)!==t)throw new cw("Failed to parse value at: "+n);return this.node(0,e,n,r)},skip:function(e,t){for(var n=this.source;t<n.length&&gw(e,fw(n,t));t++);return t},until:function(e,t){t=this.skip(bw,t);for(var n=fw(this.source,t),r=0;r<e.length;r++)if(e[r]===n)return t;throw new cw('Unexpected character: "'+n+'" at: '+t)}};var kw=ow((function(){var e,t="9007199254740993";return uw(t,(function(t,n,r){e=r.source})),e!==t})),Pw=sw&&!ow((function(){return 1/uw("-0 \t")!=-1/0}));Vm({target:"JSON",stat:!0,forced:kw},{parse:function(e,t){return Pw&&!Ym(t)?uw(e):function(e,t){e=tw(e);var n=new xw(e,0),r=n.parse(),o=r.value,i=n.skip(bw,r.end);if(i<e.length)throw new cw('Unexpected extra character: "'+fw(e,i)+'" after the parsed data at: '+i);return Ym(t)?Sw({"":o},"",t,r):o}(e,t)}});var Iw=t(Ue.JSON.parse);const Rw=["type"];function Ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),eo(n).apply(n,r)}return n}function _w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ow(Object(n),!0).forEach((function(t){Tw(e,t,n[t])})):Ur?Object.defineProperties(e,Ur(n)):Ow(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Aw(e,t,n,r,o,i,s){try{var a=e[i](s),l=a.value}catch(e){return void n(e)}a.done?t(l):om.resolve(l).then(r,o)}function Uw(e){return function(){var t=this,n=arguments;return new om((function(r,o){var i=e.apply(t,n);function s(e){Aw(i,r,o,s,a,"next",e)}function a(e){Aw(i,r,o,s,a,"throw",e)}s(void 0)}))}}function Tw(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lw(){return{pageUrl:jw(),referrer:Dw((()=>{var e;return null===(e=window.top)||void 0===e?void 0:e.document.referrer}))}}function jw(){const e=Dw((()=>window.location.ancestorOrigins))||[],t=[];let n,r=window;for(;r!==top;)eo(t).call(t,r),r=r.parent;eo(t).call(t,r);for(let r=t.length-1;r>=0&&!n;r--)n=Dw((()=>t[r].location.href)),0!==r&&(n||(n=Dw((()=>t[r-1].document.referrer))),n||(n=e[r-1]));return null!=n?new mp(n):void 0}function Dw(e){try{return e()}catch(e){return}}function Fw(e){const t=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(parseInt("0x"+t,16))));return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}class Hw{constructor(e=[]){Tw(this,"tuples",void 0),this.tuples=e}static empty(){return new Hw}add(e,t,n={}){const{stripEmpty:r=!0,prepend:o=!1,base64UrlEncode:i=!1}=n;if(""===e)return this;if(r&&""===t)return this;let s;var a,l;return s=i?Fw(t.toString()):t,o?(_p(a=this.tuples).call(a,[e,s]),this):(eo(l=this.tuples).call(l,[e,s]),this)}addArray(e,t,n={}){return t.forEach((t=>this.add(e,t,n))),this}valuesFor(e){return this.tuples.filter((([t])=>t===e)).map((([,e])=>e))}addOptional(e,t,n={}){return null!=t?this.add(e,t,n):this}addParamsMap(e){for(const t in e){const n=e[t];Array.isArray(n)?n.forEach((e=>this.add(t,e))):this.add(t,n)}return this}addExternalIdCookies(e){return e.forEach((e=>{this.addOptional("ic",e.value,{stripEmpty:!1}).addOptional("icn",e.name,{stripEmpty:!1})})),this}copy(){return new Hw(this.tuples.slice())}build(){let e="";return this.tuples.forEach((([t,n])=>{const r=0===e.length?"?":"&";e=`${e}${r}${encodeURIComponent(t)}=${encodeURIComponent(n)}`})),e}}class Nw extends Error{constructor(e,t,n){super(t,n),Tw(this,"cause",void 0),this.name=e,n&&n.cause&&(this.cause=n.cause)}}class $w extends Nw{constructor(){super("BlockedByConsentError","Blocked by consent settings")}}function Mw(e){return e instanceof $w||e instanceof Error&&null!=e.cause&&Mw(e.cause)}const qw=120;class Bw{constructor(e){var t;Tw(this,"callHandler",void 0),Tw(this,"baseQuery",void 0),Tw(this,"pixelBaseUrl",void 0),Tw(this,"sampleRate",void 0),this.callHandler=e.callHandler;const n=Lw();let r;null!=n.pageUrl&&(r=new mp(n.pageUrl),r.search=""),this.baseQuery=Hw.empty().add("tv",e.version).addOptional("refr",n.referrer).addOptional("pu",null===(t=r)||void 0===t?void 0:t.toString()),this.pixelBaseUrl=e.pixelBaseUrl,this.sampleRate=e.sampleRate}handleEvent(e){var t=this;return Uw((function*(){if("error"===e.level&&!Mw(e.error)&&t.isSampled()){const n=function(e){const t=[];let n=e;for(;null!=n&&"object"==typeof n&&n instanceof Error;)eo(t).call(t,{name:n.name.substring(0,qw),message:n.message.substring(0,qw),stackTrace:Qw(n).substring(0,1e3)}),n=n.cause;return t}(e.error);for(const r of n)try{yield t.sendError(r,e.context)}catch(e){}}}))()}isSampled(){return Math.random()<=this.sampleRate}sendError(e,t){const n=null!=t&&"appId"in t&&"string"==typeof t.appId?t.appId:void 0,r=null!=t&&"distributorId"in t&&"string"==typeof t.distributorId?t.distributorId:void 0,o=null!=t&&"wrapperName"in t&&"string"==typeof t.wrapperName?t.wrapperName:void 0,i=this.baseQuery.copy().addOptional("aid",n).addOptional("did",r).addOptional("wpn",o).add("ae",JSON.stringify(e),{base64UrlEncode:!0}).build(),s=`${this.pixelBaseUrl}/p${i}`;return this.callHandler.pixelGet(s)}}function Qw(e){let t=e;const n=[];for(;null!=t&&"object"==typeof t&&t instanceof Error;){const e=(r=t.message,o=qw,null!=r?r.substring(0,o):void 0);eo(n).call(n,null!=e?e:"No message available"),t=t.cause}var r,o;return n.join("\ncaused by: ")}function Vw(e){let t=window,n=null;for(;!n;){try{e in t.frames&&(n=t)}catch(e){}if(t===window.top||!t.parent)break;t=t.parent}return n}function Gw(e){var t;return e.gdpr&&e.gdpr.gdprApplies||e.gpp&&Yp(t=e.gpp.applicableSections).call(t,2)||!1}class zw{fromConsent(e,t){return Gw(e)?(t.info("Using blocked call handler due to privacy mode"),new Jw):new Ww(t)}}class Jw{ajaxGet(){return Uw((function*(){throw new $w}))()}pixelGet(){return Uw((function*(){throw new $w}))()}}class Ww{constructor(e){Tw(this,"logger",void 0),this.logger=e}ajaxGet(e){var t=this;return Uw((function*(){const n=t,{url:r,responseHandler:o,headers:i}=e,s=e.timeout||5e3;const a=yield new om(((e,t)=>{null!=window.XMLHttpRequest?function(e,t){const o=new XMLHttpRequest,a=tf();if(o.onreadystatechange=()=>{4===o.readyState&&(o.status>=200&&o.status<300||304===o.status?e({getBodyAsText:()=>o.responseText,expiresAt:n.responseExpires(o)}):t(new Zw(`Error during XHR call: ${o.status}, url: ${r}`)))},o.ontimeout=()=>{const e=tf()-a;t(new Zw(`Timeout after ${e} (${s}), url: ${r}`))},o.open("GET",r,!0),o.timeout=s,o.withCredentials=!0,null!=i)for(const[e,t]of hf(i))null!=t&&o.setRequestHeader(e,t);o.send()}(e,t):null!=window.XDomainRequest?function(e,t){const o=new window.XDomainRequest,a=tf();o.onprogress=()=>{},o.onload=()=>e({getBodyAsText:()=>o.responseText}),o.onerror=()=>t(new Kw(`Error during XDR call: ${o.responseText}, url: ${r}`)),o.ontimeout=()=>{const e=tf()-a;t(new Kw(`Timeout after ${e} (${s}), url: ${r}`))},o.open("GET",r),o.timeout=s,null!=i&&n.logger.error(new tb),o.send()}(e,t):t(new Yw("No supported request api found"))})).catch((e=>{throw new Yw(`Failed sending request to url ${r}`,e)}));return{data:o.apply(a),expiresAt:a.expiresAt}}))()}pixelGet(e){return Uw((function*(){const t=new Image;return t.src=e,new om(((n,r)=>{t.onload=()=>n(),t.onerror=()=>r(new Xw(`Failed loading pixel: ${e}`))}))}))()}responseExpires(e){const t=e.getResponseHeader("expires");if(t)try{return new Date(t)}catch(e){return void this.logger.error(new eb(t))}}}class Xw extends Nw{constructor(e){super("PixelError",e)}}class Yw extends Nw{constructor(e,t){super("RequestError",e,{cause:t})}}class Zw extends Nw{constructor(e){super("XhrRequestError",e)}}class Kw extends Nw{constructor(e){super("XdrRequestError",e)}}class eb extends Nw{constructor(e){super("ExpiresHeaderParsingError","Failed parsing expires header"),Tw(this,"expiresHeader",void 0),this.expiresHeader=e}}class tb extends Nw{constructor(){super("CustomHeadersUnsupportedError","Tried to send custom headers via XDR")}}const nb="1.1",rb="1.0",ob="__gppLocator";function ib(e){return sb.apply(this,arguments)}function sb(){return sb=Uw((function*(e){let t;return"function"==typeof window.__gpp?yield function(e){return ab.apply(this,arguments)}(window.__gpp):(t=Vw(ob))?yield function(e){return lb.apply(this,arguments)}(t):void e.info("GPP API not found")})),sb.apply(this,arguments)}function ab(){return ab=Uw((function*(e){const t={};return yield new om(((n,r)=>{const o=e("addEventListener",((e,o)=>cb({evt:e,success:o,resolve:n,reject:r,state:t})),void 0,nb);o&&cb({evt:o,success:!0,resolve:n,reject:r,state:t})})).finally((()=>{t.listenerId&&e("removeEventListener",(()=>{}),t.listenerId,nb)}))})),ab.apply(this,arguments)}function lb(){return(lb=Uw((function*(e){const t=`li_gpp_call_${Math.random()}`;let n;const r={};return yield new om(((o,i)=>{n=e=>{var n;const s=null==e||null===(n=e.data)||void 0===n?void 0:n.__gppReturn;(null==s?void 0:s.callId)===t&&cb({evt:s.returnValue,success:s.success,resolve:o,reject:i,state:r})},window.addEventListener("message",n,!1);const s={__gppCall:{command:"addEventListener",version:nb,callId:t}};e.postMessage(s,"*")})).finally((()=>{if(window.removeEventListener("message",n,!1),r.listenerId){const n={__gppCall:{command:"removeEventListener",version:nb,callId:t,parameter:r.listenerId}};e.postMessage(n,"*")}}))}))).apply(this,arguments)}function cb({evt:e,success:t,resolve:n,reject:r,state:o}){if("number"==typeof(null==e?void 0:e.listenerId)&&(o.listenerId=e.listenerId),null==t||t||r(Error("Failed registering GPP event listener")),e.pingData)if(e.pingData.gppVersion){const t=e.pingData,o=t.gppVersion.toString();o!==nb&&o!==rb?r(Error(`unsupported GPP version ${t.gppVersion}`)):"ready"===t.signalStatus&&ub(e.pingData,n)}else try{ub(e.pingData,n)}catch(e){r(Error("Failed to handle GPP event",{cause:e}))}}function ub(e,t){"ready"===e.signalStatus&&t({consentString:e.gppString,applicableSections:e.applicableSections})}const db="__tcfapiLocator";function pb(e){return fb.apply(this,arguments)}function fb(){return fb=Uw((function*(e){let t;return"function"==typeof window.__tcfapi?yield function(e){return hb.apply(this,arguments)}(window.__tcfapi):(t=Vw(db))?yield function(e){return gb.apply(this,arguments)}(t):void e.info("TCF API not found")})),fb.apply(this,arguments)}function hb(){return hb=Uw((function*(e){const t={};return yield new om(((n,r)=>{e("addEventListener",2,((e,o)=>vb(e,o,n,r,t)))})).finally((()=>{t.listenerId&&e("removeEventListener",2,(()=>{}),t.listenerId)}))})),hb.apply(this,arguments)}function gb(){return(gb=Uw((function*(e){const t=yb();let n;const r={};return yield new om(((o,i)=>{n=e=>{var n;const s=null==e||null===(n=e.data)||void 0===n?void 0:n.__tcfapiReturn;null!=s&&s.success||i(Error("Failed to register TCF API event listener")),(null==s?void 0:s.callId)===t&&vb(s.returnValue,s.success,o,i,r)},window.addEventListener("message",n,!1);const s={__tcfapiCall:{command:"addEventListener",version:2,callId:t}};e.postMessage(s,"*")})).finally((()=>{if(window.removeEventListener("message",n,!1),r.listenerId){const t={__tcfapiCall:{command:"removeEventListener",version:2,callId:yb(),parameter:r.listenerId}};e.postMessage(t,"*")}}))}))).apply(this,arguments)}function vb(e,t,n,r,o){"number"==typeof(null==e?void 0:e.listenerId)&&(o.listenerId=e.listenerId),t?"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||n({gdprApplies:null==e.gdprApplies?void 0:!!e.gdprApplies,consentString:e.tcString}):r(Error("Failed to register TCF API event listener"))}function yb(){return`li_tcf_call_${Math.random()}`}const mb="__uspapiLocator";function wb(e){return bb.apply(this,arguments)}function bb(){return bb=Uw((function*(e){let t;return"function"==typeof window.__uspapi?yield function(e){return Sb.apply(this,arguments)}(window.__uspapi):(t=Vw(mb))?yield function(e){return Eb.apply(this,arguments)}(t):void e.info("USP API not found")})),bb.apply(this,arguments)}function Sb(){return Sb=Uw((function*(e){return yield new om(((t,n)=>{e("getUSPData",1,((e,r)=>Cb(e,r,t,n)))}))})),Sb.apply(this,arguments)}function Eb(){return(Eb=Uw((function*(e){const t=`li_uspapi_call_${Math.random()}`;let n;const r=new om(((r,o)=>{n=e=>{var n;const i=null==e||null===(n=e.data)||void 0===n?void 0:n.__uspapiReturn;(null==i?void 0:i.callId)===t&&Cb(i.returnValue,i.success,r,o)},window.addEventListener("message",n,!1);const i={__uspapiCall:{command:"getUSPData",version:1,callId:t}};e.postMessage(i,"*")}));return yield r.finally((()=>{window.removeEventListener("message",n,!1)}))}))).apply(this,arguments)}function Cb(e,t,n,r){t&&"string"==typeof e.uspString?n({consentString:e.uspString}):r(Error("Response from USP API frame was not successful"))}class xb{constructor(e){Tw(this,"logger",void 0),Tw(this,"cachedConsent",void 0),this.logger=e}loadConsent(){var e=this;return Uw((function*(){return e.cachedConsent||(e.cachedConsent=e.loadConsentUncached()),yield e.cachedConsent}))()}loadConsentUncached(){var e=this;return Uw((function*(){return{gdpr:yield kb(pb(e.logger).catch((()=>{})),100),gpp:yield kb(ib(e.logger).catch((()=>{})),100),usPrivacy:yield kb(wb(e.logger).catch((()=>{})),100)}}))()}}function kb(e,t){return Pb.apply(this,arguments)}
/*! js-cookie v3.0.5 | MIT */function Pb(){return(Pb=Uw((function*(e,t){let n;return yield om.race([e,new om((e=>{n=setTimeout((()=>e(void 0)),t)}))]).finally((()=>clearTimeout(n)))}))).apply(this,arguments)}function Ib(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Rb=function e(t,n){function r(e,r,o){if("undefined"!=typeof document){"number"==typeof(o=Ib({},n,o)).expires&&(o.expires=new Date(tf()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in o)o[s]&&(i+="; "+s,!0!==o[s]&&(i+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+i}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),s=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(r[a]=t.read(s,a),e===a)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){r(e,"",Ib({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Ib({},this.attributes,t))},withConverter:function(t){return e(Ib({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class Ob{unrestricted(e){return new Ab(e)}fromConsent(e,t){return Gw(e)?(t.info("Using blocked storage handler due to privacy mode"),new _b):new Ab(t)}}class _b{getCookie(){throw new $w}setCookie(){throw new $w}deleteCookie(){throw new $w}findSimilarCookies(){throw new $w}localStorageIsEnabled(){throw new $w}getDataFromLocalStorage(){throw new $w}setDataInLocalStorage(){throw new $w}removeDataFromLocalStorage(){throw new $w}compatibleWithConsent(){return!0}}class Ab{constructor(e){Tw(this,"logger",void 0),Tw(this,"cachedLocalStorageIsEnabled",void 0),this.logger=e}getCookie(e){try{return Rb.get(e)}catch(e){this.logger.error(new Ub("Failed fetching from cookie jar",e))}}setCookie(e,t,n){try{Rb.set(e,t,n||{})}catch(e){this.logger.error(new Ub("Failed setting cookie",e))}}deleteCookie(e,t){try{Rb.remove(e,{domain:t})}catch(e){this.logger.error(new Ub("Failed removing from cookie jar",e))}}findSimilarCookies(e){try{const t=Rb.get();return Object.keys(t).filter((n=>n.indexOf(e)>=0&&null!==t[n])).map((e=>t[e]))}catch(e){return this.logger.error(new Ub("Failed fetching from cookie jar",e)),[]}}localStorageIsEnabled(){return null==this.cachedLocalStorageIsEnabled&&(this.cachedLocalStorageIsEnabled=this.checkLocalStorage()),this.cachedLocalStorageIsEnabled}getDataFromLocalStorage(e){if(this.localStorageIsEnabled())try{var t;return null!==(t=window.localStorage.getItem(e))&&void 0!==t?t:void 0}catch(e){this.logger.error(new Tb("Failed fetching from local storage",{cause:e}))}}setDataInLocalStorage(e,t){if(this.localStorageIsEnabled())try{window.localStorage.setItem(e,t)}catch(e){this.logger.error(new Tb("Failed saving to local storage",{cause:e}))}}removeDataFromLocalStorage(e){if(this.localStorageIsEnabled())try{window.localStorage.removeItem(e)}catch(e){this.logger.error(new Tb("Failed removing from local storage",{cause:e}))}}checkLocalStorage(){let e=!1;try{if(window&&window.localStorage){const t=Math.random().toString();window.localStorage.setItem(t,t),e=window.localStorage.getItem(t)===t,window.localStorage.removeItem(t)}}catch(e){this.logger.error(new Tb("Failed checking local storage",{cause:e}))}return e}}class Ub extends Nw{constructor(e,t){super("CookieJarError",e,{cause:t})}}class Tb extends Nw{constructor(e,t){super("LocalStorageError",e,t)}}class Lb{constructor(e){Tw(this,"size",void 0),Tw(this,"buffer",[]),Tw(this,"pointer",0),Tw(this,"full",!1),this.size=e}push(e){var t;this.full?this.buffer[this.pointer]=e:(eo(t=this.buffer).call(t,e),this.pointer===this.size-1&&(this.full=!0));this.pointer=(this.pointer+1)%this.size}getLast(e){if(e>=this.size)throw new jb("index out of bounds");const t=(this.pointer+this.size-e)%this.size;return this.buffer[t]}values(){if(!this.full)return this.buffer;const e=[];for(let t=this.pointer;t<this.size;t++)eo(e).call(e,this.buffer[t]);for(let t=0;t<this.pointer;t++)eo(e).call(e,this.buffer[t]);return e}length(){return this.full?this.size:this.pointer}}class jb extends Nw{constructor(e){super("RingBufferError",e)}}class Db{withContext(e){return new Hb(this,e)}static make(e=1e3,t=[]){return new Fb(e,t)}}class Fb extends Db{constructor(e=1e3,t=[]){super(),Tw(this,"eventHandlers",void 0),Tw(this,"events",void 0),this.eventHandlers=t,this.events=new Lb(e)}debug(e,t){this.pushAndNotify({level:"debug",message:e,context:t,timestamp:new Date})}info(e,t){this.pushAndNotify({level:"info",message:e,context:t,timestamp:new Date})}warn(e,t){this.pushAndNotify({level:"warn",message:e,context:t,timestamp:new Date})}error(e,t){this.pushAndNotify({level:"error",error:e,context:t,timestamp:new Date})}getEvents(){var e;return pm(e=this.events).call(e)}pushAndNotify(e){var t;eo(t=this.events).call(t,e),this.eventHandlers.forEach(function(){var t=Uw((function*(t){try{yield t.handleEvent(e)}catch(e){console.error("Failed to notify event handler",e)}}));return function(e){return t.apply(this,arguments)}}())}}class Hb extends Db{constructor(e,t){super(),Tw(this,"underlying",void 0),Tw(this,"defaultContext",void 0),this.underlying=e,this.defaultContext=t}debug(e,t){this.underlying.debug(e,_w(_w({},this.defaultContext),t))}info(e,t){this.underlying.info(e,_w(_w({},this.defaultContext),t))}warn(e,t){this.underlying.warn(e,_w(_w({},this.defaultContext),t))}error(e,t){this.underlying.error(e,_w(_w({},this.defaultContext),t))}getEvents(){return this.underlying.getEvents()}withContext(e){return new Hb(this.underlying,_w(_w({},this.defaultContext),e))}}const Nb={ERROR_REPORTING_SAMPLE_RATE:.1,IDEX_BASE_URL:"https://idx.liadm.com/idex",LC_VERSION:"v3.11.2",LOGGER_HISTORY_SIZE:1e3,PIXEL_BASE_URL:"https://rp.liadm.com",SIDE_CHANNEL_COLLECTOR_URL:"https://rpr.liadm.com",SIDE_CHANNEL_REGISTER_COLLECT_DELAY:1e3,SYNC_BASE_URL:"https://i.liadm.com/sync-container",SYNC_WAIT:250,IFRAME_MESSAGE_TIMEOUT:250};function $b(e){const t=typeof e;return"string"===t?`"${e}"`:"number"===t||"bigint"===t||"boolean"===t?`${e}`:"object"===t||"function"===t?null!==(n=e&&(null===(r=Object.getPrototypeOf(e))||void 0===r||null===(r=r.constructor)||void 0===r?void 0:r.name))&&void 0!==n?n:"null":t;var n,r}function Mb(e,t,n,r,o){var i,s,a,l,c,u,d,p;const f=o&&"input"in o?o.input:n.value,h=null!==(i=null!==(s=null==o?void 0:o.expected)&&void 0!==s?s:e.expects)&&void 0!==i?i:null,g=null!==(a=null==o?void 0:o.received)&&void 0!==a?a:$b(f),v={kind:e.kind,type:e.type,input:f,expected:h,received:g,message:`Invalid ${t}: ${h?`Expected ${h} but r`:"R"}eceived ${g}`,requirement:e.requirement,path:null==o?void 0:o.path,issues:null==o?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},y="schema"===e.kind,m=null!==(l=null!==(c=null!==(u=null!==(d=null!==(p=null==o?void 0:o.message)&&void 0!==p?p:e.message)&&void 0!==d?d:(e.reference,void v.lang))&&void 0!==u?u:y?void v.lang:null)&&void 0!==c?c:r.message)&&void 0!==l?l:void v.lang;var w;(m&&(v.message="function"==typeof m?m(v):m),y&&(n.typed=!1),n.issues)?eo(w=n.issues).call(w,v):n.issues=[v]}function qb(e,t){return fm(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}function Bb(e,t){var n;const r=[...new Set(e)];return r.length>1?`(${r.join(` ${t} `)})`:null!==(n=r[0])&&void 0!==n?n:"never"}function Qb(e,t){return{kind:"schema",type:"array",reference:Qb,expects:"Array",async:!1,item:e,message:t,_run(e,t){const n=e.value;if(Array.isArray(n)){e.typed=!0,e.value=[];for(let s=0;s<n.length;s++){var r;const a=n[s],l=this.item._run({typed:!1,value:a},t);if(l.issues){const r={type:"array",origin:"value",input:n,key:s,value:a};for(const t of l.issues){var o,i;if(t.path)_p(i=t.path).call(i,r);else t.path=[r];null===(o=e.issues)||void 0===o||eo(o).call(o,t)}if(e.issues||(e.issues=l.issues),t.abortEarly){e.typed=!1;break}}l.typed||(e.typed=!1),eo(r=e.value).call(r,l.value)}}else Mb(this,"type",e,t);return e}}}function Vb(e){return{kind:"schema",type:"boolean",reference:Vb,expects:"boolean",async:!1,message:e,_run(e,t){return"boolean"==typeof e.value?e.typed=!0:Mb(this,"type",e,t),e}}}function Gb(e,t){return{kind:"schema",type:"custom",reference:Gb,expects:"unknown",async:!1,check:e,message:t,_run(e,t){return this.check(e.value)?e.typed=!0:Mb(this,"type",e,t),e}}}function zb(e){return{kind:"schema",type:"lazy",reference:zb,expects:"unknown",async:!1,getter:e,_run(e,t){return this.getter(e.value)._run(e,t)}}}function Jb(e,t){return{kind:"schema",type:"literal",reference:Jb,expects:$b(e),async:!1,literal:e,message:t,_run(e,t){return e.value===this.literal?e.typed=!0:Mb(this,"type",e,t),e}}}function Wb(e,t){return{kind:"schema",type:"loose_object",reference:Wb,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const i in this.entries){const s=n[i],a=this.entries[i]._run({typed:!1,value:s},t);if(a.issues){const l={type:"object",origin:"value",input:n,key:i,value:s};for(const t of a.issues){var r,o;if(t.path)_p(o=t.path).call(o,l);else t.path=[l];null===(r=e.issues)||void 0===r||eo(r).call(r,t)}if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),(void 0!==a.value||i in n)&&(e.value[i]=a.value)}if(!e.issues||!t.abortEarly)for(const t in n)qb(n,t)&&!(t in this.entries)&&(e.value[t]=n[t])}else Mb(this,"type",e,t);return e}}}function Xb(e){return{kind:"schema",type:"number",reference:Xb,expects:"number",async:!1,message:e,_run(e,t){return"number"!=typeof e.value||isNaN(e.value)?Mb(this,"type",e,t):e.typed=!0,e}}}function Yb(e,t){return{kind:"schema",type:"object",reference:Yb,expects:"Object",async:!1,entries:e,message:t,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const i in this.entries){const s=n[i],a=this.entries[i]._run({typed:!1,value:s},t);if(a.issues){const l={type:"object",origin:"value",input:n,key:i,value:s};for(const t of a.issues){var r,o;if(t.path)_p(o=t.path).call(o,l);else t.path=[l];null===(r=e.issues)||void 0===r||eo(r).call(r,t)}if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),(void 0!==a.value||i in n)&&(e.value[i]=a.value)}}else Mb(this,"type",e,t);return e}}}function Zb(e,...t){const n={kind:"schema",type:"optional",reference:Zb,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,_run(e,t){return void 0===e.value&&("default"in this&&(e.value=function(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped._run(e,t)}};return 0 in t&&(n.default=t[0]),n}function Kb(e,t,n){return{kind:"schema",type:"record",reference:Kb,expects:"Object",async:!1,key:e,value:t,message:n,_run(e,t){const n=e.value;if(n&&"object"==typeof n){e.typed=!0,e.value={};for(const s in n)if(qb(n,s)){const a=n[s],l=this.key._run({typed:!1,value:s},t);if(l.issues){const o={type:"object",origin:"key",input:n,key:s,value:a};for(const t of l.issues){var r;t.path=[o],null===(r=e.issues)||void 0===r||eo(r).call(r,t)}if(e.issues||(e.issues=l.issues),t.abortEarly){e.typed=!1;break}}const c=this.value._run({typed:!1,value:a},t);if(c.issues){const r={type:"object",origin:"value",input:n,key:s,value:a};for(const t of c.issues){var o,i;if(t.path)_p(i=t.path).call(i,r);else t.path=[r];null===(o=e.issues)||void 0===o||eo(o).call(o,t)}if(e.issues||(e.issues=c.issues),t.abortEarly){e.typed=!1;break}}l.typed&&c.typed||(e.typed=!1),l.typed&&(e.value[l.value]=c.value)}}else Mb(this,"type",e,t);return e}}}function eS(e){return{kind:"schema",type:"string",reference:eS,expects:"string",async:!1,message:e,_run(e,t){return"string"==typeof e.value?e.typed=!0:Mb(this,"type",e,t),e}}}function tS(e){let t;if(e)for(const n of e)t?eo(t).call(t,...n.issues):t=n.issues;return t}function nS(e,t){return{kind:"schema",type:"union",reference:nS,expects:Bb(e.map((e=>e.expects)),"|"),async:!1,options:e,message:t,_run(e,t){var n;let r,o,i;for(const n of this.options){const s=n._run({typed:!1,value:e.value},t);if(s.typed){if(!s.issues){r=s;break}o?eo(o).call(o,s):o=[s]}else i?eo(i).call(i,s):i=[s]}if(r)return r;if(o){if(1===o.length)return o[0];Mb(this,"type",e,t,{issues:tS(o)}),e.typed=!0}else{if(1===(null===(n=i)||void 0===n?void 0:n.length))return i[0];Mb(this,"type",e,t,{issues:tS(i)})}return e}}}function rS(){return{kind:"schema",type:"unknown",reference:rS,expects:"unknown",async:!1,_run:e=>(e.typed=!0,e)}}function oS(e,t,n){return{kind:"schema",type:"variant",reference:oS,expects:"Object",async:!1,key:e,options:t,message:n,_run(e,t){const n=e.value;if(n&&"object"==typeof n){let r,o=0,i=this.key,s=[];const a=(e,l)=>{for(const c of e.options){if("variant"===c.type)a(c,new Set(l).add(c.key));else{let e=!0,a=0;for(const r of l){if(c.entries[r]._run({typed:!1,value:n[r]},t).issues){e=!1,i!==r&&(o<a||o===a&&r in n&&!(i in n))&&(o=a,i=r,s=[]),i===r&&eo(s).call(s,c.entries[r].expects);break}a++}if(e){const e=c._run({typed:!1,value:n},t);(!r||!r.typed&&e.typed)&&(r=e)}}if(r&&!r.issues)break}};if(a(this,new Set([this.key])),r)return r;Mb(this,"type",e,t,{input:n[i],expected:Bb(s,"|"),path:[{type:"object",origin:"value",input:n,key:i,value:n[i]}]})}else Mb(this,"type",e,t);return e}}}function iS(...e){return _w(_w({},e[0]),{},{pipe:e,_run(t,n){for(const r of e)if("metadata"!==r.kind){if(t.issues&&("schema"===r.kind||"transformation"===r.kind)){t.typed=!1;break}t.issues&&(n.abortEarly||n.abortPipeEarly)||(t=r._run(t,n))}return t}})}function sS(e,t,n){const r=e._run({typed:!1,value:t},function(e){var t,n,r;return{lang:null!==(t=null==e?void 0:e.lang)&&void 0!==t?t:void 0,message:null==e?void 0:e.message,abortEarly:null!==(n=null==e?void 0:e.abortEarly)&&void 0!==n?n:void 0,abortPipeEarly:null!==(r=null==e?void 0:e.abortPipeEarly)&&void 0!==r?r:void 0}}(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}function aS(e){const{pageDetails:t,urlCollectionSettings:n,logger:r}=e;if(null==t.pageUrl)return{isPathRemoved:!1,blockedQueryParams:[]};if("full"===(o=n).mode&&""===o.queryParametersFilter)return{url:t.pageUrl,isPathRemoved:!1,blockedQueryParams:[]};var o;const i=new mp(t.pageUrl),s=function(e,t){if("no_path"===t.mode&&"/"!==e.pathname)return e.pathname="",!0;return!1}(i,n),a=function(e,t,n){if(null==t.queryParametersFilter||""===t.queryParametersFilter)return[];try{const n=new RegExp(t.queryParametersFilter),r=new Set;return e.searchParams.forEach(((e,t)=>{n.test(t)&&r.add(t)})),r.forEach((t=>e.searchParams.delete(t))),Array.from(r)}catch(e){return n.error(new lS(e)),[]}}(i,n,r);return{url:i,isPathRemoved:s,blockedQueryParams:a}}class lS extends Nw{constructor(e){super("FailedToStripQueryParameterError","Failed to strip query parameters",{cause:e})}}for(var cS=[],uS=0;uS<64;)cS[uS]=0|4294967296*Math.sin(++uS%Math.PI);function dS(e){var t,n,r,o=[t=1732584193,n=4023233417,~t,~n],i=[],s=unescape(encodeURI(e))+"",a=s.length;for(e=--a/4+2|15,i[--e]=8*a;~a;)i[a>>2]|=s.charCodeAt(a)<<8*a--;for(uS=s=0;uS<e;uS+=16){for(a=o;s<64;a=[r=a[3],t+((r=a[0]+[t&n|~t&r,r&t|~r&n,t^n^r,n^(t|~r)][a=s>>4]+cS[s]+~~i[uS|15&[s,5*s+1,3*s+5,7*s][a]])<<(a=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*a+s++%4])|r>>>-a),t,n])t=0|a[1],n=a[2];for(s=4;s;)o[--s]+=a[s]}for(e="";s<32;)e+=(o[s>>3]>>4*(1^s++)&15).toString(16);return e}function pS(e){var t,n,r,o,i,s=[],a=[n=1732584193,r=4023233417,~n,~r,3285377520],l=[],c=unescape(encodeURI(e))+"",u=c.length;for(l[e=--u/4+2|15]=8*u;~u;)l[u>>2]|=c.charCodeAt(u)<<8*~u--;for(t=u=0;t<e;t+=16){for(n=a;u<80;n=[n[4]+(s[u]=u<16?~~l[t+u]:2*c|c<0)+1518500249+[r&o|~r&i,c=341275144+(r^o^i),882459459+(r&o|r&i|o&i),c+1535694389][u++/5>>2]+((c=n[0])<<5|c>>>27),c,r<<30|r>>>2,o,i])c=s[u-3]^s[u-8]^s[u-14]^s[u-16],r=n[1],o=n[2],i=n[3];for(u=5;u;)a[--u]+=n[u]}for(c="";u<40;)c+=(a[u>>3]>>4*(7-u++)&15).toString(16);return c}for(var fS,hS=18,gS=[],vS=[];hS>1;hS--)for(fS=hS;fS<320;)gS[fS+=hS]=1;function yS(e,t){return 4294967296*Math.pow(e,1/t)|0}for(fS=0;fS<64;)gS[++hS]||(vS[fS]=yS(hS,2),gS[fS++]=yS(hS,3));function mS(e,t){return e>>>t|e<<-t}function wS(e){var t=vS.slice(hS=fS=0,8),n=[],r=unescape(encodeURI(e))+"",o=r.length;for(n[e=--o/4+2|15]=8*o;~o;)n[o>>2]|=r.charCodeAt(o)<<8*~o--;for(o=[];hS<e;hS+=16){for(yS=t.slice();fS<64;_p(yS).call(yS,r+(mS(r=yS[0],2)^mS(r,13)^mS(r,22))+(r&yS[1]^yS[1]&yS[2]^yS[2]&r)))yS[3]+=r=0|(o[fS]=fS<16?~~n[fS+hS]:(mS(r=o[fS-2],17)^mS(r,19)^r>>>10)+o[fS-7]+(mS(r=o[fS-15],7)^mS(r,18)^r>>>3)+o[fS-16])+yS.pop()+(mS(r=yS[4],6)^mS(r,11)^mS(r,25))+(r&yS[5]^~r&yS[6])+gS[fS++];for(fS=8;fS;)t[--fS]+=yS[fS]}for(r="";fS<64;)r+=(t[fS>>3]>>4*(7-fS++)&15).toString(16);return r}const bS="[\\s'\"]",SS="*********";function ES(e){return`(?:${function(e){return`(?:${e?`^${bS}*`:"\\b"}([A-Z0-9._%+\\-]+@[A-Z0-9.\\-]+\\.[A-Z]{2,})${e?`${bS}*$`:"\\b"})`}(e)}|${function(e){return`(?:${e?`^${bS}*`:"\\b"}((?:[A-Z0-9._\\-]|%25|%2B)+%40[A-Z0-9.\\-]+\\.[A-Z]{2,})${e?`${bS}*$`:"\\b"})`}(e)})`}function CS(e){return`(?:${function(e){return`(?:${e?`^${bS}*`:"\\b"}([A-F0-9]{32,64})${e?`${bS}*$`:"\\b"})`}(e)}|${ES(e)})`}const xS=new RegExp(ES(!1),"gi"),kS=new RegExp(CS(!0),"i"),PS=new RegExp(CS(!1),"gi"),IS=new Map([[32,"md5"],[40,"sha1"],[64,"sha256"]]);function RS(e,t,n,r){return e.substring(0,t)+r+e.substring(n)}function OS(e){try{const t=[];let n=e,r=xS.exec(e),o=0;for(;r;){let i;i=r[1]?_S(r[1]):_S(decodeURIComponent(r[2])),eo(t).call(t,i),n=RS(n,o+r.index,o+r.index+r[0].length,i.md5),o+=i.md5.length-r[0].length,r=xS.exec(e)}return{stringWithoutRawEmails:n,hashesFromOriginalString:t}}finally{xS.lastIndex=0}}function _S(e){const t=e.toLowerCase();return{md5:dS(t),sha1:pS(t),sha256:wS(t)}}function AS(e,t){return"string"==typeof t?t.replace(xS,SS):t}function US(e){if(null!=e[1]){const n=(t=e[1],IS.get(t.length));if(null!=n)return{type:"hashed",value:{type:n,value:e[1]}}}else{if(null!=e[2])return{type:"raw",value:e[2]};if(null!=e[3])return{type:"raw",value:decodeURIComponent(e[3])}}var t}function TS(e){const t=kS.exec(e);if(t)return US(t)}function LS(e){const{contextElementCollectionSettings:t}=e;if(!t.enabled)return{};const{contextSelectors:n,maxLength:r}=t;if(""===n||r<=0)return{};const o=function(e,t){const n=window.document.querySelectorAll(e);let r="";return n.forEach((e=>{const n=OS(e.outerHTML).stringWithoutRawEmails,o=r+n;if(i=o,Math.ceil(4*new Blob([i]).size/3)>t)return o;var i;r=o})),r}(n,r);return{collectedElements:o}}function jS(e){throw new Error(`Pattern not exhaustive. Encountered unknown value ${e}`)}function DS(e){return function(e,t){return new Date((new Date).getTime()+e*t)}(e,864e5)}const FS="lidids.",HS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/,NS=(e,t,n)=>n.indexOf(e)===t;function $S(e){return"string"==typeof e&&HS.test(e)}class MS extends Nw{constructor(e,t){super("LoadAndStoreDecisionsError",e,{cause:t})}}class qS extends Nw{constructor(e,t){super("GetExternalIdCookieError",e,{cause:t})}}function BS(e){const{storageHandler:t,partnerCookiesToResolve:n,logger:r}=e;try{return function(e,t){const n=[],r=[];return e.forEach((e=>{const o=t.getCookie(e)||t.getDataFromLocalStorage(e);if(o){const{stringWithoutRawEmails:t,hashesFromOriginalString:i}=OS(o);eo(n).call(n,{name:e,value:t}),eo(r).call(r,...i)}})),{retrieved:n,extractedHashes:QS(r)}}(function(e){const t=[];return e.forEach((e=>eo(t).call(t,Am(e).call(e)))),t}(n),t)}catch(e){return r.error(new VS("Error while enriching identifiers",e)),{retrieved:[],extractedHashes:[]}}}function QS(e){const t=new Set,n=[];return e.forEach((e=>{t.has(e.md5)||(eo(n).call(n,e),t.add(e.md5))})),n}class VS extends Nw{constructor(e,t){super("ResolvePartnerCookiesError",e,{cause:t})}}const GS="0123456789ABCDEFGHJKMNPQRSTVWXYZ",zS=GS.length,JS=Math.pow(2,48)-1,WS=10,XS=16,YS=function(){const e="undefined"!=typeof window?window:null,t=e&&(e.crypto||e.msCrypto);if(t)return()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]/255};return()=>Math.random()}();function ZS(){let e=Math.floor(YS()*zS);return e===zS&&(e=zS-1),GS.charAt(e)}function KS(){return function(e,t){if(e>JS)throw new eE("cannot encode time greater than "+JS);let n,r="";for(;t>0;t--)n=e%zS,r=GS.charAt(n)+r,e=(e-n)/zS;return r}(tf(),WS)+function(e){let t="";for(;e>0;e--)t=ZS()+t;return t}(XS)}class eE extends Nw{constructor(e){super("UlidError",e)}}const tE=730,nE="_lc2_fpi",rE="_lc2_fpi_js",oE="_li_duid";function iE(e){const{storageHandler:t,domainDetails:n,logger:r}=e,o=n.cookieDomain,i=function(e,t,n){let r;try{r=e.getCookie(nE)}catch(e){n.error(new sE("Error while loading old FPC from cookie",e))}if(null==r)try{r=e.getCookie(rE)}catch(e){n.error(new sE("Error while loading old FPC from JS-only cookie",e))}if(null==r)try{r=e.getDataFromLocalStorage(oE)}catch(e){n.error(new sE("Error while loading old FPC from local storage",e))}return null!=r?r:function(e){const t=`${function(e,t=12){return pS(e.replace(/^\./,"")).substring(0,t)}(e)}--${KS()}`;return t.toLocaleLowerCase()}(t)}(t,o,r);if(function(e,t,n,r){let o=!1;try{e.getCookie(nE)!==t&&e.setCookie(nE,t,{domain:n,expires:DS(tE)}),o=!0}catch(e){r.error(new sE("Couldn't store FPC in cookie",e))}try{e.setCookie(rE,t,{domain:n}),o=!0}catch(e){r.error(new sE("Couldn't store FPC in JS-only cookie",e))}try{e.setDataInLocalStorage(oE,t),o=!0}catch(e){r.error(new sE("Couldn't store FPC in local storage",e))}return o}(t,i,o,r))return i}class sE extends Nw{constructor(e,t){super("GenerateAndStoreLiveConnectIdsError",e,{cause:t})}}class aE extends Nw{constructor(e){super("InvalidCollectedEmailError",e)}}const lE=["email","emailhash","hash","hashedemail"];const cE=["items","itemids"];class uE{constructor(e){Tw(this,"value",void 0),this.value=e}}class dE extends Nw{constructor(e,t){super("InvalidSourceEventPageUrlError",e,{cause:t})}}class pE{constructor(e){Tw(this,"apply",void 0),this.apply=e}map(e){return new pE((t=>e(this.apply(t))))}defaultOnEmpty(e){return new pE((t=>{const n=t.getBodyAsText();return""===n?e:this.apply({getBodyAsText:()=>n})}))}}!function(e){e.ignore=new e((()=>{})),e.constant=function(t){return new e((()=>t))},e.text=new e((e=>e.getBodyAsText())),e.parseJson=function(t){return new e((e=>{const n=e.getBodyAsText();let r;try{r=Iw(n)}catch(e){throw new fE(e)}const o=sS(t,r);if(o.success)return o.output;throw new hE(`Failed parsing response: ${JSON.stringify(r)}`)}))},e.fail=new e((()=>{throw new gE}))}(pE||(pE={}));class fE extends Nw{constructor(e){super("JsonParsingError","Failed parsing response to json",{cause:e})}}class hE extends Nw{constructor(e){super("ResponseParsingError",`Failed parsing response: ${e}`)}}class gE extends Nw{constructor(){super("UnexpectedResponseError","Unexpected response")}}const vE="idCookie";function yE(){return yE=Uw((function*(e){const{callHandler:t,liveConnectFpc:n,resolveSettings:r,identityPool:o,idCookieSettings:i}=e,s=function(e){var t,n,r,o,i;const{liveConnectFpc:s,pageDetails:a,domainDetails:l,consent:c,integration:u,requestedAttributes:d,identityPool:p,pageViewId:f}=e,h=Hw.empty();let g;null!=(null===(t=c.gdpr)||void 0===t?void 0:t.gdprApplies)&&(g=c.gdpr.gdprApplies?"1":"0");h.addOptional("duid",s);let v="any";switch(u.type){case"application":u.publisherId&&(v=u.publisherId);break;case"distributor":h.add("did",u.distributorId);break;case"custom":u.publisherId&&(v=u.publisherId),h.addOptional("did",u.distributorId);break;default:jS(u)}h.addOptional("cd",l.cookieDomain).addOptional("pu",a.pageUrl?function(e){const t=new mp(e.toString());return t.pathname="",t.search="",t}(a.pageUrl).toString():void 0).addOptional("gdpr",g).addOptional("gdpr_consent",null===(n=c.gdpr)||void 0===n?void 0:n.consentString).addOptional("us_privacy",null===(r=c.usPrivacy)||void 0===r?void 0:r.consentString).addOptional("gpp_s",null===(o=c.gpp)||void 0===o?void 0:o.consentString).addOptional("gpp_as",null===(i=c.gpp)||void 0===i||null===(i=i.applicableSections)||void 0===i?void 0:i.join(",")).addExternalIdCookies(p.getExternalIdCookies()).addOptional("pv",f),y=h,m=p.getProvidedEmailHashes(),void m.forEach((e=>{switch(e.type){case"md5":y.addOptional("m",e.value);break;case"sha1":y.addOptional("sh1",e.value);break;case"sha256":y.addOptional("sh2",e.value)}})),d.forEach((e=>{h.add("resolve",e)})),p.getRetrievedIdentifiers().forEach((e=>{h.add(e.name,e.value)})),h.addOptional("pip",e.identityPool.getIpv4(),{base64UrlEncode:!0}).addOptional("pip6",e.identityPool.getIpv6(),{base64UrlEncode:!0}),e.additionalResolveParameters&&h.addParamsMap(e.additionalResolveParameters);var y,m;return{base:`${e.idexEndpointUrl}/${encodeURIComponent(e.resolveSettings.identityPartner)}/${encodeURIComponent(v)}`,query:h}}(e),a=yield function(e){const{callHandler:t,resolutionUrl:n,resolveSettings:r}=e,o=`${n.base}${n.query.build()}`;return t.ajaxGet({url:o,responseHandler:mE,timeout:r.timeout})}({callHandler:t,resolutionUrl:s,resolveSettings:r,identityPool:o}),l=s.query.valuesFor("resolve"),c=_w({},a.data);if(Yp(l).call(l,vE))if("provided"===i.type){const e=o.getExternalIdCookie(i.source,i.key);null!=e&&(c[vE]=e)}else"generated"===i.type&&null!=n&&(c[vE]=n);return _w(_w({},a),{},{data:c})})),yE.apply(this,arguments)}const mE=pE.parseJson(Kb(eS(),eS())).defaultOnEmpty({});const wE=Yb({bakers:Zb(Qb(eS()))}),bE=pE.parseJson(wE);function SE(){return SE=Uw((function*(e){const{pixelUrls:t,callHandler:n,timestamp:r,collectSettings:o,logger:i,pixelBaseUrl:s,identityPool:a}=e,{retries:l,timeout:c}=o,u={"X-LI-Provided-User-Agent":a.getUserAgent()};for(let e=0;e<l+1;e++)try{const e=yield n.ajaxGet({url:t.makeJUrl(s),responseHandler:bE,headers:u,timeout:c});return void(yield CE({callHandler:n,response:e.data,timestamp:r,logger:i}))}catch(e){if(i.error(new kE("Failed to send pixel",e)),Mw(e))return void i.info("Pixel call blocked by consent, not retrying")}i.error(new PE(`Failed to send pixel after all ${l} retries`),{pixelUrls:t,collectSettings:o}),yield function(e){return EE.apply(this,arguments)}(e)})),SE.apply(this,arguments)}function EE(){return(EE=Uw((function*(e){const{callHandler:t,pixelUrls:n,pixelBaseUrl:r}=e;try{yield t.pixelGet(n.makePUrl(r))}catch(e){}}))).apply(this,arguments)}function CE(e){return xE.apply(this,arguments)}function xE(){return(xE=Uw((function*(e){var t;const{callHandler:n,response:r,timestamp:o,logger:i}=e,s=null!==(t=r.bakers)&&void 0!==t?t:[];for(const e of s)try{i.info(`Calling baker ${e}`),yield n.pixelGet(`${e}?dtstmp=${o.getTime()}`)}catch(e){}}))).apply(this,arguments)}class kE extends Nw{constructor(e,t){super("SendPixelError",e,{cause:t})}}class PE extends Nw{constructor(e){super("SendPixelRetriesExhaustedError",e)}}function IE(e){const{cssSelectors:t,logger:n}=e,r=[];if(0===t.length)return r;try{const e=t.join(", ");document.querySelectorAll(e).forEach((e=>{if(e instanceof HTMLInputElement){const t=TS(e.value);t&&eo(r).call(r,t)}else{const t=function(e){const t=[];try{let n=PS.exec(e);for(;null!=n;){const r=US(n);r&&eo(t).call(t,r),n=PS.exec(e)}return t}finally{PS.lastIndex=0}}(e.outerHTML);eo(r).call(r,...t)}}))}catch(e){n.error(new RE(`Failed to collect emails from css selectors ${t}`,e))}return r}class RE extends Nw{constructor(e,t){super("CollectEmailsFromCssSelectorError",e,{cause:t})}}class OE extends Nw{constructor(e,t){super("CollectEmailsFromQueryParamsError",e,{cause:t})}}class _E extends Nw{constructor(e,t){super("CollectEmailsFromWindowPropertyError",e,{cause:t})}}class AE{constructor(e){Tw(this,"props",void 0);const{logger:t,consent:n,storageHandler:r,callHandler:o,clientDetails:i,integration:s,idCookieSettings:a,urlCollectionSettings:l,partnerCookiesToResolve:c,contextElementCollectionSettings:u,collectSettings:d,autoCollectSettings:p,resolveSettings:f,pixelSyncSettings:h,hubConfig:g,emailExtractionSettings:v,eventTriggeredCollectionSettings:y,sharedData:m,identityPool:w,id5CollectionSettings:b}=e,{pageDetails:S,domainDetails:E}=m,C=BS({storageHandler:r,partnerCookiesToResolve:c,logger:t});w.addPartnerCookies(C);const x=aS({pageDetails:S,urlCollectionSettings:l,logger:t}),k=LS({contextElementCollectionSettings:u}),P=function(e){const{storageHandler:t,idCookieSettings:n,logger:r}=e;switch(n.type){case"generated":return;case"provided":try{const{source:e,key:o}=n;switch(e){case"cookie":{const e=t.getCookie(o);return null==e?void r.error(new qS("Cookie doesn't exist")):{source:"cookie",name:o,value:e}}case"local_storage":{const e=t.getDataFromLocalStorage(o);return null==e?void r.error(new qS("Local storage item doesn't exist")):{source:"local_storage",name:o,value:e}}default:jS(e)}}catch(e){r.error(new qS("Failed fetching provided id cookie",e))}}}({storageHandler:r,idCookieSettings:a,logger:t});null!=P&&w.addExternalIdCookie(P);const I=iE({domainDetails:E,storageHandler:r,logger:t}),R=function(e){var t;const{pageDetails:n,domainDetails:r,storageHandler:o,logger:i}=e,s=((null===(t=n.pageUrl)||void 0===t?void 0:t.searchParams.getAll("li_did"))||[]).map((e=>Am(e).call(e))).filter((e=>e.length>0&&$S(e))).filter(NS);let a;try{a=o.findSimilarCookies(FS)}catch(e){i.error(new MS("Error while searching for decisions in cookies",e)),a=[]}const l=a.map((e=>Am(e).call(e))).filter((e=>e.length>0&&$S(e)));return s.forEach((e=>{try{o.setCookie(`${FS}${e}`,e,{expires:DS(30),sameSite:"lax",domain:r.cookieDomain})}catch(e){i.error(new MS("Error while storing decision in cookie",e))}})),{decisionIds:s.concat(l).filter(NS)}}({pageDetails:S,domainDetails:E,storageHandler:r,logger:t});let O=[];null!=S.pageUrl&&(O=function({pageUrl:e,queryParamRegexes:t,logger:n}){const r=[];if(0===t.length)return r;try{const n=e.searchParams,o=new RegExp(t.join("|"),"i");n.forEach(((e,t)=>{if(o.test(t)){const t=TS(e);t&&eo(r).call(r,t)}}))}catch(e){n.error(new OE("Failed to collect emails from query params",e))}return r}({pageUrl:S.pageUrl,queryParamRegexes:v.queryParameterRegexes,logger:t})),this.props={logger:t,hubConfig:g,callHandler:o,storageHandler:r,consent:n,pageDetails:S,domainDetails:E,liveConnectFpc:I,decisions:R,collectedUrl:x,contextElements:k,clientDetails:i,integration:s,urlCollectionSettings:l,collectSettings:d,autoCollectSettings:p,resolveSettings:f,pixelSyncSettings:h,emailExtractionSettings:v,emailsFromQueryParams:O,eventTriggeredCollectionSettings:y,identityPool:w,idCookieSettings:a,id5CollectionSettings:b,pageViewId:m.pageViewId}}resolve(e){var t=this;return Uw((function*(){var n;const{requestedAttributes:r,additionalResolveParameters:o,onSuccess:i,onFailure:s}=e,{logger:a,consent:l,callHandler:c,liveConnectFpc:u,pageDetails:d,domainDetails:p,resolveSettings:f,integration:h,hubConfig:g,storageHandler:v,identityPool:y,idCookieSettings:m,pageViewId:w}=t.props;try{const e=yield function(e){return yE.apply(this,arguments)}({consent:l,liveConnectFpc:u,pageDetails:d,domainDetails:p,callHandler:c,resolveSettings:f,integration:h,requestedAttributes:r,additionalResolveParameters:o,idexEndpointUrl:g.idexEndpointUrl,identityPool:y,idCookieSettings:m,pageViewId:w});for(const t of i)try{switch(t.type){case"write_to_local_storage":v.setDataInLocalStorage(t.targetKey,JSON.stringify(e.data));break;case"write_to_cookie":v.setCookie(t.targetKey,JSON.stringify(e.data),{expires:null!==(n=e.expiresAt)&&void 0!==n?n:DS(730),sameSite:t.sameSite,domain:t.domain});break;case"callback":t.callback(e.data);break;default:jS(t)}}catch(e){a.error(new UE("Failed to handle onResolveSuccess action",e))}}catch(e){if(a.error(new UE("Failed to resolve identity",e)),s)try{s(e)}catch(e){a.error(new UE("Failed to call onFailure callback",e))}}}))()}collect(e){var t=this;return Uw((function*(){const{callHandler:n,pageDetails:r,collectedUrl:o,urlCollectionSettings:i,contextElements:s,integration:a,clientDetails:l,collectSettings:c,liveConnectFpc:u,decisions:d,consent:p,domainDetails:f,logger:h,hubConfig:g,identityPool:v,pageViewId:y}=t.props;try{const t=new Date,m=function(e){const{pageDetails:t,sourceEvent:n,logger:r}=e;if("pageUrl"in n&&"string"==typeof n.pageUrl)try{return{pageUrl:new mp(n.pageUrl),referrer:t.referrer}}catch(e){r.error(new dE("Cannot create pageUrl with invalid source",e))}}({pageDetails:r,sourceEvent:e,logger:h});let w=o,b=r;null!=m&&(w=aS({pageDetails:m,urlCollectionSettings:i,logger:h}),b=m);const S=function(e,t){const n=[];for(const r in e)if(Yp(lE).call(lE,r.toLowerCase())&&0===n.length){const o=e[r];if("string"==typeof o){const e=TS(o);switch(null==e?void 0:e.type){case"raw":{const t=_S(e.value);eo(n).call(n,{type:"md5",value:t.md5},{type:"sha1",value:t.sha1},{type:"sha256",value:t.sha256});break}case"hashed":eo(n).call(n,e.value);break;case void 0:t.error(new aE(`Invalid email format, key: ${r}`))}}else t.error(new aE(`Input with ${r} is not a string: ${typeof o}`))}function r(t){const n=e[t];if("string"==typeof n)return n}return{hashedEmails:n,ipv4:r("ipv4"),ipv6:r("ipv6"),userAgent:r("userAgent")}}(e,h);v.addSourceEventEmails(S),v.addIpv4(S),v.addIpv6(S),v.addUserAgent(S);const E=function(e){const{sourceEvent:t}=e,n=_w({},t);for(const e in t)if(Yp(cE).call(cE,e.toLowerCase())){const r=t[e];Array.isArray(r)&&r.length>10&&(n[e]=r.slice(0,10))}return new uE(n)}({sourceEvent:e}),C=function(e){var t,n,r,o,i;const s=Hw.empty().add("dtstmp",e.timestamp.getTime());switch(e.integration.type){case"application":s.addOptional("aid",e.integration.appId);break;case"distributor":s.add("did",e.integration.distributorId);break;case"custom":s.addOptional("did",e.integration.distributorId);break;default:jS(e.integration)}let a;s.add("se",JSON.stringify(e.limitedSourceEvent.value,AS),{base64UrlEncode:!0}).addOptional("duid",e.liveConnectFpc).add("tv",e.hubVersion).addOptional("pu",e.collectedUrl.url?e.collectedUrl.url.toString():void 0).addOptional("pu_rp",e.collectedUrl.isPathRemoved?"1":void 0).addOptional("pu_rqp",e.collectedUrl.blockedQueryParams.length>0?e.collectedUrl.blockedQueryParams.join(","):void 0),e.identityPool.getRetrievedIdentifiers().forEach((e=>{s.add(`ext_${e.name}`,e.value)})),e.identityPool.getExtractedHashes().forEach((e=>{s.add("scre",`${e.md5},${e.sha1},${e.sha256}`)})),null!=(null===(t=e.consent.gdpr)||void 0===t?void 0:t.gdprApplies)&&(a=e.consent.gdpr.gdprApplies?"1":"0"),s.add("li_did",e.decisions.decisionIds.join(",")).addOptional("e",e.identityPool.getProvidedEmailHashes().map((e=>e.value)).join(",")).addOptional("us_privacy",null===(n=e.consent.usPrivacy)||void 0===n?void 0:n.consentString).add("wpn",e.clientDetails.name).add("wpv",e.clientDetails.version).addOptional("co",e.clientDetails.collaborator).addOptional("gdpr",a).addOptional("gdpr_consent",null===(r=e.consent.gdpr)||void 0===r?void 0:r.consentString).addOptional("refr",e.pageDetails.referrer).addOptional("gpp_s",null===(o=e.consent.gpp)||void 0===o?void 0:o.consentString).addOptional("gpp_as",null===(i=e.consent.gpp)||void 0===i?void 0:i.applicableSections.join(",")).addOptional("cd",e.domainDetails.cookieDomain).addExternalIdCookies(e.identityPool.getExternalIdCookies()).addOptional("c",e.contextElements.collectedElements,{base64UrlEncode:!0}).add("pv",e.pageViewId).addOptional("pip",e.identityPool.getIpv4(),{base64UrlEncode:!0}).addOptional("pip6",e.identityPool.getIpv6(),{base64UrlEncode:!0});const l=s.build();return{makeJUrl:e=>`${e}/j${l}`,makePUrl:e=>`${e}/p${l}`}}({integration:a,timestamp:t,limitedSourceEvent:E,contextElements:s,clientDetails:l,liveConnectFpc:u,decisions:d,domainDetails:f,consent:p,collectedUrl:w,pageDetails:b,hubVersion:g.hubVersion,identityPool:v,pageViewId:y});yield function(e){return SE.apply(this,arguments)}({pixelBaseUrl:g.pixelBaseUrl,pixelUrls:C,callHandler:n,collectSettings:c,timestamp:t,logger:h,identityPool:v})}catch(e){h.error(new TE(e))}}))()}tryCollectToSideChannel(){var e=this;return Uw((function*(){const{logger:t,emailExtractionSettings:n,emailsFromQueryParams:r,liveConnectFpc:o,pageDetails:i,integration:s}=e.props,a=e.props.identityPool.getId5Data();try{const l=IE({cssSelectors:n.emailCssSelectors,logger:t}),c=function(e){const{logger:t,propertyPaths:n}=e,r=[];return n.forEach((e=>{try{const t=e.split(".");let n=window;for(const e of t)n=n[e];if("string"==typeof n){const e=TS(n);e&&eo(r).call(r,e)}}catch(n){t.error(new _E(`Failed to collect emails from window property ${e}`,n))}})),r}({propertyPaths:n.windowPropertyPaths,logger:t});if(0===l.length&&0===c.length&&0===r.length&&null==a)return void t.debug("No data to collect to side channel, skipping");let u;switch(s.type){case"application":u=s.appId;break;case"distributor":case"custom":u=s.distributorId;break;default:jS(s)}const d={fpc:o,page_url:i.pageUrl,customer_id:u,window_properties:c,css_selectors:l,query_parameters:r,id5_data:a,timestamp:(new Date).toISOString()},p=Fw(JSON.stringify(d)),f=`${e.props.hubConfig.sideChannelCollectorUrl}?${p}`;t.info("Sending data to side channel",{eventToSend:d}),yield e.props.callHandler.pixelGet(f)}catch(e){t.error(new LE(e))}}))()}runStartupTasks(e,t){var n=this;return Uw((function*(){e.scheduleAfterDelay(0,{type:"sync_container",consent:n.props.consent,domainDetails:n.props.domainDetails,liveConnectFpc:n.props.liveConnectFpc,pixelSyncSettings:n.props.pixelSyncSettings,logger:n.props.logger,identityPool:n.props.identityPool,integration:n.props.integration,storageHandler:n.props.storageHandler}),n.props.id5CollectionSettings.enabled&&e.scheduleId5Collection(n.props.id5CollectionSettings.pollingInterval),n.props.eventTriggeredCollectionSettings.pageEvents.length>0&&e.scheduleOnPageEvents(n.props.eventTriggeredCollectionSettings.pageEvents,{type:"collect_to_side_channel",clientRef:t}),(n.props.emailExtractionSettings.queryParameterRegexes.length>0||n.props.emailExtractionSettings.emailCssSelectors.length>0||n.props.emailExtractionSettings.windowPropertyPaths.length>0)&&e.scheduleAfterDelay(n.props.hubConfig.sideChannelRegisterCollectDelay,{type:"collect_to_side_channel",clientRef:t}),n.props.autoCollectSettings.enabled&&e.scheduleAfterDelay(n.props.autoCollectSettings.delay,{type:"attempt_auto_collect",clientRef:t})}))()}collectsOnId5Change(){return this.props.eventTriggeredCollectionSettings.onId5Change.enabled}}class UE extends Nw{constructor(e,t){super("ResolveIdentityError",e,{cause:t})}}class TE extends Nw{constructor(e){super("CollectError","Failed to collect",{cause:e})}}class LE extends Nw{constructor(e){super("CollectToSideChannelError","Failed to collect to side channel",{cause:e})}}function jE(e){const{settings:t,monoid:n,pageDetails:r,logger:o}=e;let i=n.empty;try{const e=function(e){return hf(e).map((([e,t])=>[new RegExp(e),hf(t).map((([e,t])=>[new RegExp(e),t]))]))}(t),[o,s]=function(e){if(null==e.pageUrl)return["",""];return[e.pageUrl.hostname,e.pageUrl.pathname]}(r);e.filter((([e])=>e.test(o))).forEach((([,e])=>{e.filter((([e])=>e.test(s))).forEach((([,e])=>{i=n.combine(i,e)}))}))}catch(e){o.error(new DE("Failed to evaluate page settings",e))}return i}class DE extends Nw{constructor(e,t){super("EvalPageSettingsError",e,{cause:t})}}const FE={empty:{emailCssSelectors:[],queryParameterRegexes:[],windowPropertyPaths:[]},combine:(e,t)=>({emailCssSelectors:e.emailCssSelectors.concat(t.emailCssSelectors),queryParameterRegexes:e.queryParameterRegexes.concat(t.queryParameterRegexes),windowPropertyPaths:e.windowPropertyPaths.concat(t.windowPropertyPaths)})},HE={empty:{pageEvents:[],onId5Change:{enabled:!1}},combine:(e,t)=>({pageEvents:e.pageEvents.concat(t.pageEvents),onId5Change:{enabled:e.onId5Change.enabled||t.onId5Change.enabled}})},NE={empty:{emailExtractionSettings:FE.empty,eventTriggeredCollectionSettings:HE.empty},combine:(e,t)=>({emailExtractionSettings:FE.combine(e.emailExtractionSettings,t.emailExtractionSettings),eventTriggeredCollectionSettings:HE.combine(e.eventTriggeredCollectionSettings,t.eventTriggeredCollectionSettings)})};function $E(e){var t;const n=e.getEvents().find((e=>{var t;return"register_client"===(null==e||null===(t=e.context)||void 0===t||null===(t=t.command)||void 0===t?void 0:t.type)})),r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(null==n||null===(t=n.context)||void 0===t?void 0:t.command,Rw);return r||{}}function ME(e,t){let n=!1;try{t.forEach((e=>{e.eventBus.once("pre_lips",(()=>{n=!0}))}))}catch(t){e.error(new BE("Error while checking if collect has been called globally",t))}return n}class qE{constructor(e){Tw(this,"config",void 0),Tw(this,"eventBus",{once:(e,t)=>{"pre_lips"===e&&t()}}),this.config=e}}class BE extends Nw{constructor(e,t){super("LiQInstancesError",e,{cause:t})}}class QE{constructor(){Tw(this,"idCookies",new Map),Tw(this,"retrievedIdentifiersFromPartnerCookies",new Map),Tw(this,"extractedHashesFromPartnerCookies",new Map),Tw(this,"providedEmailHashes",[]),Tw(this,"ipv4",void 0),Tw(this,"ipv6",void 0),Tw(this,"userAgent",void 0),Tw(this,"id5",void 0)}addExternalIdCookie(e){let t=this.idCookies.get(e.source);return null==t&&(t=new Map,this.idCookies.set(e.source,t)),t.set(e.name,e.value),this}getExternalIdCookie(e,t){var n;return null===(n=this.idCookies.get(e))||void 0===n?void 0:n.get(t)}getExternalIdCookies(){const e=[];return this.idCookies.forEach(((t,n)=>{t.forEach(((t,r)=>{eo(e).call(e,{source:n,name:r,value:t})}))})),e}addPartnerCookies(e){return e.retrieved.forEach((e=>{this.retrievedIdentifiersFromPartnerCookies.set(e.name,e.value)})),e.extractedHashes.forEach((e=>{this.extractedHashesFromPartnerCookies.set(e.md5,e)})),this}getRetrievedIdentifiers(){return Array.from(this.retrievedIdentifiersFromPartnerCookies,(([e,t])=>({name:e,value:t})))}getExtractedHashes(){return Array.from(this.extractedHashesFromPartnerCookies,(([e,t])=>t))}addSourceEventEmails(e){return e.hashedEmails.forEach((e=>{var t;eo(t=this.providedEmailHashes).call(t,e)})),this}getProvidedEmailHashes(){return this.providedEmailHashes}addIpv4(e){return this.ipv4=e.ipv4,this}getIpv4(){return this.ipv4}addIpv6(e){return this.ipv6=e.ipv6,this}getIpv6(){return this.ipv6}addUserAgent(e){return this.userAgent=e.userAgent,this}getUserAgent(){return this.userAgent}addId5Data(e){return this.id5=e,this}getId5Data(){return this.id5}}const VE="_li_dcdm_c";function GE(e,t){const n=document.domain||document.location&&document.location.host||window&&window.location&&window.location.host||"localhost",r=n.split(".");for(let n=r.length;n>0;n--){const o=`.${r.slice(n-1,r.length).join(".")}`;if(zE(o,e,t),JE(e,t)===o)return o}return function(e,t,n){try{t.deleteCookie(VE,e)}catch(e){n.warn("Failed to delete TLD cache",{error:e})}}(n,e,t),`.${n}`}function zE(e,t,n){try{t.setCookie(VE,e,{sameSite:"lax",domain:e})}catch(e){n.warn("Failed to set TLD cache",{error:e})}}function JE(e,t){try{return e.getCookie(VE)}catch(e){t.warn("Failed to get TLD cache",{error:e})}}let WE;const XE=new Uint8Array(16);function YE(){if(!WE&&(WE="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!WE))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return WE(XE)}const ZE=[];for(let e=0;e<256;++e)eo(ZE).call(ZE,(e+256).toString(16).slice(1));var KE={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function eC(e,t,n){if(KE.randomUUID&&!t&&!e)return KE.randomUUID();const r=(e=e||{}).random||(e.rng||YE)();return r[6]=15&r[6]|64,r[8]=63&r[8]|128,function(e,t=0){return ZE[e[t+0]]+ZE[e[t+1]]+ZE[e[t+2]]+ZE[e[t+3]]+"-"+ZE[e[t+4]]+ZE[e[t+5]]+"-"+ZE[e[t+6]]+ZE[e[t+7]]+"-"+ZE[e[t+8]]+ZE[e[t+9]]+"-"+ZE[e[t+10]]+ZE[e[t+11]]+ZE[e[t+12]]+ZE[e[t+13]]+ZE[e[t+14]]+ZE[e[t+15]]}(r)}const tC="_li_ss",nC="li_sync_frame";let rC=!1,oC=null;function iC(e){null===document.getElementById(nC)?(oC||setTimeout((()=>function(e){if(!oC)return;const{storageHandler:t,logger:n,syncContainerEndpointUrl:r,domainDetails:o}=oC;try{const s=function(e,t){var n;return null!==(n=function(e,t){try{return e.getDataFromLocalStorage(tC)}catch(e){t.error(new sC("Error while loading sync state from local storage",{cause:e}))}}(e,t))&&void 0!==n?n:function(e,t){try{return e.getCookie(tC)}catch(e){t.error(new sC("Error while loading sync state form cookie storage",e))}}(e,t)}(t,n)||"",a=function(e){var t,n,r;const{appId:o,distributorIds:i,consent:s,domainDetails:a,liveConnectFpc:l,syncState:c,pixelSyncSettings:u,syncContainerEndpointUrl:d,hubVersion:p,identityPool:f}=e,h={stripEmpty:!1},g=Hw.empty().addOptional("duid",l,h).addOptional("appId",o,h).addArray("ds",(i||[]).filter(Boolean),h).add("euns",u.euns?1:0,h).addOptional("pt",u.pixelTimeout,h).addOptional("s",c,h).addOptional("us_privacy",null===(t=s.usPrivacy)||void 0===t?void 0:t.consentString,h).addOptional("gpp_s",null===(n=s.gpp)||void 0===n?void 0:n.consentString,h).addOptional("gpp_as",null===(r=s.gpp)||void 0===r||null===(r=r.applicableSections)||void 0===r?void 0:r.join(","),h).addOptional("version",p,h).addOptional("cd",a.cookieDomain,h).addExternalIdCookies(f.getExternalIdCookies()).add("pv",e.pageViewId);return`${d}${g.build()}`}(_w(_w({},oC),{},{syncState:s})),l=document.createElement("iframe");if(!l||!document.body)return void n.error(new sC("Failed to create iframe for sync container"));if(l.style.opacity="0",l.style.width="0px",l.style.height="0px",l.style.border="0px",l.style.position="absolute",l.style.top="0px",l.style.left="0px",l.style.zIndex="-1000",l.id=nC,"postMessage"in window){const e=new mp(r).origin,s=r=>{r.origin===e&&r.data&&"string"==typeof r.data&&(rC=!0,function(e,t,n,r){try{t&&t.replace(/([^=]+)=([^&]*)&?/g,((t,o,i)=>{if(o=decodeURIComponent(o),i=decodeURIComponent(i),o===tC){try{e.setDataInLocalStorage(o,i)}catch(e){n.error(new sC("Error while persisting sync state in local storage",e))}try{e.setCookie(o,i,{expires:DS(730),sameSite:"lax",domain:r})}catch(e){n.error(new sC("Error while persisting sync state in cookie storage",e))}}return""}))}catch(e){n.error(new sC("Error while handling SC message",e))}}(t,r.data,n,o.cookieDomain))};i=s,window.addEventListener?window.addEventListener("message",i,!1):window.attachEvent("onmessage",i)}l.src=a,document.body.appendChild(l),l.onload=function(){setTimeout((()=>{rC||n.error(new aC("Error while loading sync container"))}),e)}}catch(e){n.error(new sC("Error while launching sync container",e))}var i}(e.iframeMessageTimeout)),e.syncWait),oC=((e,t)=>{var n,r,o,i,s;return _w(_w(_w({},e),t),{},{pixelSyncSettings:{euns:(void 0!==(null===(n=e.pixelSyncSettings)||void 0===n?void 0:n.euns)?e.pixelSyncSettings.euns:t.pixelSyncSettings.euns)||t.pixelSyncSettings.euns,pixelTimeout:Math.max(null!==(r=null===(o=e.pixelSyncSettings)||void 0===o?void 0:o.pixelTimeout)&&void 0!==r?r:0,null!==(i=t.pixelSyncSettings.pixelTimeout)&&void 0!==i?i:0)||void 0},consent:e.appId?e.consent:t.consent,appId:null!==(s=e.appId)&&void 0!==s?s:"application"===t.integration.type?t.integration.appId:void 0,distributorIds:[...e.distributorIds||[],..."distributor"===t.integration.type?[t.integration.distributorId]:[]]})})(oC||{},e)):e.logger.info("Sync container already launched")}class sC extends Nw{constructor(e,t){super("SyncContainerError",e,{cause:t})}}class aC extends Nw{constructor(e,t){super("SyncContainerLoadError",e,{cause:t})}}class lC{constructor(e,t,n,r,o,i,s,a){Tw(this,"storageHandlerFactory",void 0),Tw(this,"callHandlerFactory",void 0),Tw(this,"consentManager",void 0),Tw(this,"logger",void 0),Tw(this,"hubConfig",void 0),Tw(this,"commandQueue",void 0),Tw(this,"scheduler",void 0),Tw(this,"sharedData",void 0),Tw(this,"clientHandlers",new Map),Tw(this,"sharedIdentityPool",new QE),this.storageHandlerFactory=e,this.callHandlerFactory=t,this.consentManager=n,this.logger=r,this.hubConfig=o,this.commandQueue=i,this.scheduler=s,this.sharedData=a}static makeAsync(e,t,n,r,o,i,s){return Uw((function*(){const a=e.unrestricted(r),l=Lw(),c=function(e){const{storageHandler:t,logger:n}=e;return{cookieDomain:GE(t,n)}}({logger:r,storageHandler:a}),u=eC();return new lC(e,t,n,r,o,i,s,{pageDetails:l,domainDetails:c,pageViewId:u})}))()}processCommand(e){switch(this.logger.info(`hub received command of type ${e.type}`,{command:e}),e.type){case"register_client":return this.processRegisterClientCommand(e);case"collect":return this.processCollectCommand(e);case"resolve":return this.processResolveCommand(e);case"log":return this.processLogCommand(e);case"debug":return this.processDebugCommand(e);case"sync_container":return this.syncContainer(e),om.resolve();case"collect_to_side_channel":return this.processCollectToSideChannelCommand(e);case"attempt_auto_collect":return this.processAttemptAutoCollectCommand(e);case"new_id5_available":return this.processNewId5AvailableEvent(e);default:jS(e)}}syncContainer(e){e.pixelSyncSettings.enabled&&!Gw(e.consent)&&iC({integration:e.integration,consent:e.consent,domainDetails:e.domainDetails,liveConnectFpc:e.liveConnectFpc,storageHandler:e.storageHandler,pixelSyncSettings:e.pixelSyncSettings,syncWait:this.hubConfig.syncWait,syncContainerEndpointUrl:this.hubConfig.syncContainerEndpointUrl,hubVersion:this.hubConfig.hubVersion,logger:e.logger,identityPool:e.identityPool,pageViewId:this.sharedData.pageViewId,iframeMessageTimeout:this.hubConfig.iframeMessageTimeout})}processRegisterClientCommand(e){var t=this;return Uw((function*(){const n=e.clientRef;if(t.clientHandlers.has(n))t.logger.error(new cC,{clientRef:n,command:e,existingState:t.clientHandlers.get(n)});else try{var r;const o=null!=e.consent?e.consent:yield t.consentManager.loadConsent(),i=Gw(o)?new QE:t.sharedIdentityPool,s=t.logger.withContext({clientRef:n,registration:e,appId:"application"===e.integration.type?e.integration.appId:void 0,distributorId:"distributor"===e.integration.type?e.integration.distributorId:void 0,wrapperName:""!==Am(r=e.clientDetails.name).call(r)?e.clientDetails.name:"not-provided"}),a=t.callHandlerFactory.fromConsent(o,s),l=t.storageHandlerFactory.fromConsent(o,s),c=jE({settings:e.pageDependentSettings,monoid:NE,pageDetails:t.sharedData.pageDetails,logger:s}),u=FE.combine(e.emailExtractionSettings,c.emailExtractionSettings),d=HE.combine(e.eventTriggeredCollectionSettings,c.eventTriggeredCollectionSettings),p=new AE({logger:s,callHandler:a,storageHandler:l,consent:o,hubConfig:t.hubConfig,sharedData:t.sharedData,contextElementCollectionSettings:e.contextElementCollectionSettings,partnerCookiesToResolve:e.partnerCookies,idCookieSettings:e.idCookieSettings,clientDetails:e.clientDetails,integration:e.integration,urlCollectionSettings:e.urlCollectionSettings,collectSettings:e.collectSettings,autoCollectSettings:e.autoCollectSettings,resolveSettings:e.resolveSettings,pixelSyncSettings:e.pixelSyncSettings,id5CollectionSettings:e.id5CollectionSettings,emailExtractionSettings:u,eventTriggeredCollectionSettings:d,identityPool:i});t.clientHandlers.set(n,p),t.logger.info("Client registered",{clientRef:n}),yield p.runStartupTasks(t.scheduler,n)}catch(n){t.logger.error(new uC(n),{command:e})}}))()}processCollectCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?om.resolve():this.doCollect(t,e.sourceEvent)}processCollectToSideChannelCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?om.resolve():t.tryCollectToSideChannel()}processResolveCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?om.resolve():t.resolve({requestedAttributes:e.requestedAttributes,additionalResolveParameters:e.additionalResolveParameters,onSuccess:e.onSuccess,onFailure:e.onFailure})}processAttemptAutoCollectCommand(e){const t=this.loadClientHandler(e.clientRef);return null==t?om.resolve():(n=this.logger,window.liQ_instances=null!==(r=window.liQ_instances)&&void 0!==r?r:[],ME(n,window.liQ_instances)||this.commandQueue.collectQueued()?(this.logger.info("Auto collect was attempted but was skipped",{clientRef:e.clientRef}),om.resolve()):this.doCollect(t,{}));var n,r}processLogCommand(e){switch(e.level){case"debug":this.logger.debug(e.message,e.context);break;case"info":this.logger.info(e.message,e.context);break;case"warn":this.logger.warn(e.message,e.context);break;case"error":{const t=new Nw(e.name,e.message,{cause:e.cause});this.logger.error(t,e.context)}break;default:jS(e)}return om.resolve()}processDebugCommand(e){return null!=e.onEvents&&e.onEvents(this.logger.getEvents()),null!=e.onHub&&e.onHub(this),om.resolve()}processNewId5AvailableEvent(e){return this.sharedIdentityPool.addId5Data({id5:e.id5,linkType:e.linkType}),this.forAllClients(((e,t)=>{t.collectsOnId5Change()&&this.commandQueue.pushInternal({type:"collect_to_side_channel",clientRef:e})})),om.resolve()}loadClientHandler(e){const t=this.clientHandlers.get(e);return null==t&&this.logger.error(new dC,{ref:e}),t}forAllClients(e){this.clientHandlers.forEach(((t,n)=>e(n,t)))}doCollect(e,t){return function(e){if(null==window.liQ_instances)window.liQ_instances=[new qE($E(e))];else if(!ME(e,window.liQ_instances)){var t;eo(t=window.liQ_instances).call(t,new qE($E(e)))}}(this.logger),e.collect(t)}}class cC extends Nw{constructor(){super("DuplicateClientRegisterError","Received duplicate registration for the same ref")}}class uC extends Nw{constructor(e){super("RegisterClientError","Failed registering a new client",{cause:e})}}class dC extends Nw{constructor(){super("UnknownClientError","Client passed an unknown client ref")}}class pC extends Nw{constructor(e,t){super("SubscribeToPageEventsError",e,{cause:t})}}class fC{constructor(e,t){Tw(this,"commandQueue",void 0),Tw(this,"logger",void 0),Tw(this,"id5CollectionEnabled",!1),this.commandQueue=e,this.logger=t}scheduleAfterDelay(e,t){this.logger.info(`Scheduling ${t.type} for ${e}ms from now`),setTimeout((()=>{this.logger.info(`Executing scheduled ${t.type}`),this.commandQueue.pushInternal(t)}),e)}scheduleOnPageEvents(e,t){const n=e.map((e=>({cssSelector:e.eventSourceCssSelector,eventType:e.eventType,action:()=>{this.logger.info(`Scheduling ${t.type} for page event`,{event:e,command:t}),this.commandQueue.pushInternal(t)}})));this.logger.info(`Subscribing to ${n.length} page events`,{events:e}),function(e){const{listeners:t,logger:n}=e;if(0===t.length)return;const r=()=>{t.forEach((e=>{try{document.querySelectorAll(e.cssSelector).forEach((t=>{t.addEventListener(e.eventType,(()=>{try{e.action()}catch(e){n.error(new pC("Failed to execute action for listener",e))}}))}))}catch(e){n.error(new pC("Failed to subscribe listener",e))}}))};try{"loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)}catch(e){n.error(new pC("Failed to subscribe to DOMContentLoaded event",e))}}({listeners:n,logger:this.logger})}scheduleId5Collection(e){const t=this;function n(){return n=Uw((function*(){let n=!1;for(;!n;)if(null!=window.ID5){try{window.ID5.init({partnerId:"538"}).onUpdate((e=>{const n=e.getUserId(),r=e.getLinkType();t.logger.info("Received id5 data",{id5:n,linkType:r}),t.commandQueue.pushInternal({type:"new_id5_available",id5:n,linkType:r})}))}catch(e){t.logger.error(new hC(e))}n=!0}else yield new om((t=>setTimeout(t,e)))})),n.apply(this,arguments)}this.id5CollectionEnabled||(this.id5CollectionEnabled=!0,this.logger.info("Scheduling id5 collection"),function(){n.apply(this,arguments)}())}}class hC extends Nw{constructor(e){super("Id5RegisterError","Failed to register to id5 api",{cause:e})}}function gC(){return Gb((e=>"function"==typeof e),"A function is required!")}const vC=nS([eS(),Xb(),Vb(),function e(t){return{kind:"schema",type:"null",reference:e,expects:"null",async:!1,message:t,_run(e,t){return null===e.value?e.typed=!0:Mb(this,"type",e,t),e}}}(),function e(t){return{kind:"schema",type:"undefined",reference:e,expects:"undefined",async:!1,message:t,_run(e,t){return void 0===e.value?e.typed=!0:Mb(this,"type",e,t),e}}}(),Qb(zb((()=>vC))),Kb(eS(),zb((()=>vC))),Yb({toJSON:gC()})]),yC=Kb(eS(),vC),mC=Zb(function e(t,n){return{kind:"schema",type:"set",reference:e,expects:"Set",async:!1,value:t,message:n,_run(e,t){const n=e.value;if(n instanceof Set){e.typed=!0,e.value=new Set;for(const i of n){const s=this.value._run({typed:!1,value:i},t);if(s.issues){const a={type:"set",origin:"value",input:n,key:null,value:i};for(const t of s.issues){var r,o;if(t.path)_p(o=t.path).call(o,a);else t.path=[a];null===(r=e.issues)||void 0===r||eo(r).call(r,t)}if(e.issues||(e.issues=s.issues),t.abortEarly){e.typed=!1;break}}s.typed||(e.typed=!1),e.value.add(s.value)}}else Mb(this,"type",e,t);return e}}}(eS()),new Set),wC=Zb(Yb({retries:Zb(Xb(),3),timeout:Zb(Xb(),0)}),{}),bC=Zb(Yb({enabled:Zb(Vb(),!0),delay:Zb(Xb(),120)}),{}),SC=iS(Zb(Wb({type:Zb(eS(),"generated")}),{}),oS("type",[Yb({type:Jb("generated")}),Yb({type:Jb("provided"),source:nS([Jb("cookie"),Jb("local_storage")]),key:eS()})])),EC=Yb({gdprApplies:Zb(Vb()),consentString:eS()}),CC=Yb({consentString:eS()}),xC=Yb({consentString:eS(),applicableSections:Qb(Xb())}),kC=Yb({gdpr:Zb(EC),usPrivacy:Zb(CC),gpp:Zb(xC)}),PC=Zb(kC),IC=Gb((e=>"object"==typeof e),"An object is required!"),RC=oS("type",[Yb({type:Jb("application"),appId:Zb(eS()),publisherId:Zb(eS())}),Yb({type:Jb("distributor"),distributorId:eS()}),Yb({type:Jb("custom"),publisherId:Zb(eS()),distributorId:Zb(eS())})]),OC=Yb({name:eS(),version:eS(),collaborator:Zb(eS())}),_C=Zb(Yb({mode:Zb(nS([Jb("full"),Jb("no_path")]),"full"),queryParametersFilter:Zb(eS())}),{}),AC=iS(Zb(Wb({enabled:Zb(Vb(),!1)}),{}),oS("enabled",[Yb({enabled:Jb(!1)}),Yb({enabled:Jb(!0),contextSelectors:eS(),maxLength:Xb()})])),UC=Zb(Yb({timeout:Zb(Xb(),5e3),identityPartner:Zb(eS(),"unknown")}),{}),TC=oS("type",[Yb({type:Jb("write_to_local_storage"),targetKey:eS()}),Yb({type:Jb("write_to_cookie"),targetKey:eS(),sameSite:Zb(nS([Jb("strict"),Jb("lax"),Jb("none")])),domain:Zb(eS())}),Yb({type:Jb("callback"),callback:gC()})]),LC=iS(Zb(Wb({enabled:Zb(Vb(),!1)}),{}),oS("enabled",[Yb({enabled:Jb(!1)}),Yb({enabled:Jb(!0),euns:Zb(Vb(),!1),pixelTimeout:Zb(Xb())})])),jC=Zb(Yb({emailCssSelectors:Zb(Qb(eS()),[]),queryParameterRegexes:Zb(Qb(eS()),[]),windowPropertyPaths:Zb(Qb(eS()),[])}),{}),DC=iS(Zb(Wb({enabled:Zb(Vb(),!1)}),{}),oS("enabled",[Yb({enabled:Jb(!1)}),Yb({enabled:Jb(!0),pollingInterval:Zb(Xb(),500)})])),FC=Yb({eventSourceCssSelector:eS(),eventType:eS()}),HC=Zb(Yb({pageEvents:Zb(Qb(FC),[]),onId5Change:Zb(Yb({enabled:Zb(Vb(),!1)}),{})}),{}),NC=Zb(iS(Qb(eS()),function e(t){return{kind:"transformation",type:"transform",reference:e,async:!1,operation:t,_run(e){return e.value=this.operation(e.value),e}}}((e=>new Set(e)))),[]),$C=nS([eS(),Xb(),Vb()]),MC=Zb(Kb(eS(),nS([$C,Qb($C)])),{}),qC=Zb(Kb(eS(),Kb(eS(),Yb({emailExtractionSettings:Zb(jC,{}),eventTriggeredCollectionSettings:Zb(HC,{})}))),{}),BC=Yb({type:Jb("register_client"),clientRef:IC,clientDetails:OC,integration:RC,consent:PC,partnerCookies:mC,idCookieSettings:SC,urlCollectionSettings:_C,contextElementCollectionSettings:AC,collectSettings:wC,autoCollectSettings:bC,resolveSettings:UC,pixelSyncSettings:LC,eventTriggeredCollectionSettings:HC,emailExtractionSettings:jC,id5CollectionSettings:DC,pageDependentSettings:qC}),QC=Yb({type:Jb("collect"),clientRef:IC,sourceEvent:yC}),VC=Yb({type:Jb("resolve"),clientRef:IC,requestedAttributes:NC,additionalResolveParameters:MC,onFailure:Zb(gC()),onSuccess:Qb(TC)}),GC=oS("level",[Yb({type:Jb("log"),level:Jb("debug"),message:eS(),context:Zb(Wb({}))}),Yb({type:Jb("log"),level:Jb("info"),message:eS(),context:Zb(Wb({}))}),Yb({type:Jb("log"),level:Jb("warn"),message:eS(),context:Zb(Wb({}))}),Yb({type:Jb("log"),level:Jb("error"),name:eS(),message:eS(),cause:Zb(function e(t,n){return{kind:"schema",type:"instance",reference:e,expects:t.name,async:!1,class:t,message:n,_run(e,t){return e.value instanceof this.class?e.typed=!0:Mb(this,"type",e,t),e}}}(Error)),context:Zb(Wb({}))})]),zC=oS("type",[BC,QC,VC,Yb({type:Jb("debug"),onEvents:Zb(gC()),onHub:Zb(gC())}),GC]);Wb({globalVarName:eS(),distributorId:eS(),wrapperName:Zb(eS()),collaborator:Zb(eS()),usPrivacyString:Zb(eS()),gdprApplies:Zb(Vb(),!1),gdprConsent:Zb(eS()),sync:Zb(Vb()),euns:Zb(Vb()),pixelTimeout:Zb(Xb()),identifiersToResolve:Zb(nS([eS(),Qb(eS())])),identityResolutionConfig:Zb(Yb({ajaxTimeout:Zb(Xb()),source:Zb(eS()),requestedAttributes:Zb(Qb(eS())),idCookieMode:Zb(nS([Jb("generated"),Jb("provided")]))})),urlCollectionMode:Zb(nS([Jb("full"),Jb("no_path")]),"full"),queryParametersFilter:Zb(eS()),ajaxTimeout:Zb(Xb()),ajaxRetries:Zb(Xb()),contextSelectors:Zb(eS()),contextElementsLength:Zb(Xb()),peopleVerifiedId:Zb(eS()),gppString:Zb(eS()),gppApplicableSections:Zb(Qb(Xb())),idCookie:Zb(Yb({strategy:Zb(nS([Jb("cookie"),Jb("localStorage")])),name:Zb(eS())})),resolutionSync:iS(Zb(Wb({enabled:Zb(Vb(),!1)}),{}),oS("enabled",[Yb({enabled:Jb(!1)}),Yb({enabled:Jb(!0),targetKey:eS(),strategy:nS([Jb("cookie"),Jb("ls")]),resolutionOptions:MC})])),scrapingCookieNames:Zb(nS([eS(),Qb(eS())])),defaultEventDelay:Zb(Xb()),emailExtraction:Zb(rS()),id5Collection:Zb(rS()),eventTriggeredCollection:Zb(rS()),pageDependentSettings:Zb(rS())});const JC=Yb({appId:Zb(eS()),wrapperName:Zb(eS()),usPrivacyString:Zb(eS()),collaborator:Zb(eS()),gdprApplies:Zb(Vb(),!1),gdprConsent:Zb(eS()),identifiersToResolve:Zb(nS([eS(),Qb(eS())])),identityResolutionConfig:Zb(Yb({ajaxTimeout:Zb(Xb()),source:Zb(eS()),publisherId:Zb(nS([eS(),Xb()])),requestedAttributes:Zb(Qb(eS())),idCookieMode:Zb(nS([Jb("generated"),Jb("provided")]))})),urlCollectionMode:Zb(nS([Jb("full"),Jb("no_path")]),"full"),queryParametersFilter:Zb(eS()),ajaxTimeout:Zb(Xb()),ajaxRetries:Zb(Xb()),contextSelectors:Zb(eS()),contextElementsLength:Zb(Xb()),gppString:Zb(eS()),gppApplicableSections:Zb(Qb(Xb())),idCookie:Zb(Yb({strategy:Zb(nS([Jb("cookie"),Jb("localStorage")])),name:Zb(eS())})),scrapingCookieNames:Zb(nS([eS(),Qb(eS())])),defaultEventDelay:Zb(Xb()),sync:Zb(Vb()),euns:Zb(Vb()),pixelTimeout:Zb(Xb()),emailExtraction:Zb(rS()),id5Collection:Zb(rS()),eventTriggeredCollection:Zb(rS()),pageDependentSettings:Zb(rS())});class WC{constructor(e,t,n,r,o){Tw(this,"logger",void 0),Tw(this,"running",!1),Tw(this,"hubPromise",void 0),Tw(this,"bufferedCommands",[]),this.logger=r;const i=new fC(this,this.logger.withContext({component:"scheduler"}));this.hubPromise=lC.makeAsync(e,t,n,r,o,this,i)}push(...e){for(const t of e){const e=sS(zC,t);e.success?this.pushInternal(e.output):this.logger.error(new XC(t,e.issues))}return this.bufferedCommands.length}pushInternal(...e){var t;const n=eo(t=this.bufferedCommands).call(t,...e);return this.running||(this.running=!0,this.drain()),n}collectQueued(){return this.bufferedCommands.some((e=>"collect"===e.type))}get length(){return this.bufferedCommands.length}drain(){var e=this;return Uw((function*(){const t=yield e.hubPromise;for(;e.bufferedCommands.length>0;){const n=e.bufferedCommands.shift();try{yield t.processCommand(n)}catch(t){e.logger.error(new YC(t),{command:n})}}e.running=!1}))()}}class XC extends Nw{constructor(e,t){super("MalformedCommandError","hub received malformed command"),Tw(this,"command",void 0),Tw(this,"issues",void 0),this.command=e,this.issues=t,this.command=e,this.issues=t}}class YC extends Nw{constructor(e){super("CommandExecutionError","Failed to execute command",{cause:e})}}!function(){if(null!=window.liQHub&&!Array.isArray(window.liQHub))return void console.log("Not starting liQHub: window.liQHub is neither undefined nor an array");const e=function(){const e=new Bw({callHandler:new Ww(Db.make()),pixelBaseUrl:Nb.PIXEL_BASE_URL,sampleRate:Nb.ERROR_REPORTING_SAMPLE_RATE,version:Nb.LC_VERSION}),t=Db.make(Nb.LOGGER_HISTORY_SIZE,[e]).withContext({wrapperName:"hub"}),n=new zw,r=new Ob,o=new xb(t),i={hubVersion:Nb.LC_VERSION,syncContainerEndpointUrl:Nb.SYNC_BASE_URL,idexEndpointUrl:Nb.IDEX_BASE_URL,syncWait:Nb.SYNC_WAIT,pixelBaseUrl:Nb.PIXEL_BASE_URL,sideChannelCollectorUrl:Nb.SIDE_CHANNEL_COLLECTOR_URL,sideChannelRegisterCollectDelay:Nb.SIDE_CHANNEL_REGISTER_COLLECT_DELAY,iframeMessageTimeout:Nb.IFRAME_MESSAGE_TIMEOUT};return new WC(r,n,o,t,i)}();Array.isArray(window.liQHub)&&window.liQHub.forEach((t=>eo(e).call(e,t))),window.liQHub={push:(...t)=>eo(e).call(e,...t),length:e.length}}();class ZC{constructor(e,t){Tw(this,"pusher",void 0),Tw(this,"version",void 0),Tw(this,"clientRef",void 0),Tw(this,"bufferedPushes",[]),Tw(this,"ready",!1),Tw(this,"config",void 0),this.pusher=e,this.version=t}push(...e){return e.forEach((e=>this.pushOne(e))),this.pusher().length}get length(){return this.pusher().length}resolve(e,t,n){"function"==typeof t?this.resolveHelper(e,t,n):this.resolveHelper(e,void 0,t)}resolveHelper(e,t,n){if(null==this.clientRef){var r;eo(r=this.pusher()).call(r,{type:"log",level:"error",name:"StandardClientEventBeforeConfig",message:"Cannot resolve before configuration is received"})}else{var o,i;const r=this.config.identityResolutionConfig;eo(o=this.pusher()).call(o,{type:"resolve",clientRef:this.clientRef,onSuccess:[{type:"callback",callback:e}],onFailure:t,requestedAttributes:null!==(i=null==r?void 0:r.requestedAttributes)&&void 0!==i?i:[],additionalResolveParameters:n})}}pushOne(e){if(null!=e&&"object"==typeof e){if("config"in e){const n=sS(JC,e.config);var t;if(!n.success)return void eo(t=this.pusher()).call(t,{type:"log",level:"error",name:"StandardClientInvalidConfig",message:"Invalid configuration received",context:{issues:n.issues}});this.handleConfigEvent(n.output)}else if(null==this.clientRef){var n;eo(n=this.bufferedPushes).call(n,e)}else{var r;const t=sS(yC,e);var o;if(!t.success)return void eo(o=this.pusher()).call(o,{type:"log",level:"error",name:"StandardClientInvalidEvent",message:"Invalid event received",context:{event:e}});eo(r=this.pusher()).call(r,{type:"collect",clientRef:this.clientRef,sourceEvent:t.output})}}}handleConfigEvent(e){if(null==this.clientRef){var t,n,r;this.config=e,this.clientRef={},eo(t=this.pusher()).call(t,{type:"register_client",clientRef:this.clientRef,integration:rx(e),partnerCookies:nx(e),clientDetails:{name:null!==(n=e.wrapperName)&&void 0!==n?n:"lc-bundle",version:this.version,collaborator:e.collaborator},consent:tx(e),contextElementCollectionSettings:ox(e),idCookieSettings:KC(e),urlCollectionSettings:ex(e),collectSettings:{timeout:e.ajaxTimeout,retries:e.ajaxRetries},autoCollectSettings:{delay:e.defaultEventDelay},resolveSettings:{identityPartner:null===(r=e.identityResolutionConfig)||void 0===r?void 0:r.source},pixelSyncSettings:{enabled:e.sync,euns:e.euns,pixelTimeout:e.pt},emailExtractionSettings:e.emailExtraction,id5CollectionSettings:e.id5Collection,eventTriggeredCollectionSettings:e.eventTriggeredCollection,pageDependentSettings:e.pageDependentSettings}),this.bufferedPushes.forEach((e=>this.pushOne(e))),this.bufferedPushes=[],this.ready=!0}else{const t=function(e,t){if(e.appId!==t.appId||e.wrapperName!==t.wrapperName)return{appId:[e.appId,t.appId],wrapperName:[e.wrapperName,t.wrapperName]}}(this.config,e);var o;if(null!=t)eo(o=this.pusher()).call(o,{type:"log",level:"error",name:"StandardClientConfigMismatch",message:`Additional mismatched configuration received: ${JSON.stringify(t)}`})}}}function KC(e){return null==e.idCookie?{type:"generated"}:"localStorage"===e.idCookie.strategy&&null!=e.idCookie.name?{type:"provided",source:"local_storage",key:e.idCookie.name}:"cookie"===e.idCookie.strategy&&null!=e.idCookie.name?{type:"provided",source:"cookie",key:e.idCookie.name}:{type:"generated"}}function ex(e){return{mode:e.urlCollectionMode,queryParametersFilter:e.queryParametersFilter}}function tx(e){var t;if(!(null!=e.gdprConsent||null!=e.usPrivacyString||null!=e.gppString))return;return{gdpr:null!=e.gdprConsent?{gdprApplies:e.gdprApplies,consentString:e.gdprConsent}:void 0,usPrivacy:null!=e.usPrivacyString?{consentString:e.usPrivacyString}:void 0,gpp:null!=e.gppString?{consentString:e.gppString,applicableSections:null!==(t=e.gppApplicableSections)&&void 0!==t?t:[]}:void 0}}function nx(e){var t,n;const r=null!==(t=null!==(n=e.identifiersToResolve)&&void 0!==n?n:e.scrapingCookieNames)&&void 0!==t?t:[];return"string"==typeof r?new Set(r.split(",").map((e=>Am(e).call(e)))):new Set(r)}function rx(e){var t;return{type:"application",publisherId:null===(t=e.identityResolutionConfig)||void 0===t||null===(t=t.publisherId)||void 0===t?void 0:t.toString(),appId:e.appId}}function ox(e){var t;return null!=e.contextSelectors?{enabled:!0,contextSelectors:e.contextSelectors,maxLength:null!==(t=e.contextElementsLength)&&void 0!==t?t:0}:{enabled:!1}}var ix;window.liQHub=null!==(ix=window.liQHub)&&void 0!==ix?ix:[],(null==window.liQ||Array.isArray(window.liQ))&&function(){const e=new ZC((()=>window.liQHub),Nb.LC_VERSION);null!=window.LI&&eo(e).call(e,{config:window.LI}),Array.isArray(window.liQ)&&window.liQ.forEach((t=>eo(e).call(e,t))),window.liQ=e}()}();
